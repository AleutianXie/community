// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.21/esri/copyright.txt for details.
//>>built
require({cache:{"dojo/debounce":function(){define([],function(){return function(p,m){var k;return function(){k&&clearTimeout(k);var n=this,e=arguments;k=setTimeout(function(){p.apply(n,e)},m)}}})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(p,m,k,n,e,h,l,g,c,d,b,B,t){function x(){}
function v(a){return function(f,c,b,d){return f&&"string"==typeof c&&f[c]==x?f.on(c.substring(2).toLowerCase(),l.hitch(b,d)):a.apply(k,arguments)}}p.around(k,"connect",v);h.connect&&p.around(h,"connect",v);p=n("dijit._Widget",[b,B,t],{onClick:x,onDblClick:x,onKeyDown:x,onKeyPress:x,onKeyUp:x,onMouseDown:x,onMouseMove:x,onMouseOut:x,onMouseOver:x,onMouseLeave:x,onMouseEnter:x,onMouseUp:x,constructor:function(a){this._toConnect={};for(var f in a)this[f]===x&&(this._toConnect[f.replace(/^on/,"").toLowerCase()]=
a[f],delete a[f])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,f){return this[this._onMap(a)]===x?k.connect(this.domNode,a.toLowerCase(),this,f):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,f){h.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,f)},attr:function(a,
f){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){h.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?g("[widgetId]",this.containerNode).map(d.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});e("dijit-legacy-requires")&&c(0,function(){require(["dijit/_base"])});return p})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(p,m,k,n,e,h,l,g,c,d,b,B,t,x,v,a,f,r,A,y,w,u,q){function D(a){return function(f){g[f?"set":"remove"](this.domNode,a,f);this._set(a,f)}}t.add("dijit-legacy-requires",!x.isAsync);t.add("dojo-bidi",!1);t("dijit-legacy-requires")&&f(0,function(){p(["dijit/_base/manager"])});var z={};n=h("dijit._WidgetBase",[r,w],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:D("lang"),dir:"",_setDirAttr:D("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:n.blankGif||p.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var f=a.prototype,c=a._setterAttrs=[],a=a._onMap={},b;for(b in f.attributeMap)c.push(b);for(b in f)/^on/.test(b)&&(a[b.substring(2).toLowerCase()]=b),/^_set[A-Z](.*)Attr$/.test(b)&&(b=b.charAt(4).toLowerCase()+
b.substr(5,b.length-9),f.attributeMap&&b in f.attributeMap||c.push(b))}},postscript:function(a,f){this.create(a,f)},create:function(a,f){this._introspect();this.srcNodeRef=l.byId(f);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,v.mixin(this,a));this.postMixInProperties();this.id||(this.id=q.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=
this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=y.body(this.ownerDocument);q.add(this);this.buildRendering();var b;if(this.domNode){this._applyAttributes();var c=this.srcNodeRef;c&&c.parentNode&&this.domNode!==c&&(c.parentNode.replaceChild(this.domNode,c),b=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();b&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},f;for(f in this.params||{})a[f]=this._get(f);
m.forEach(this.constructor._setterAttrs,function(f){if(!(f in a)){var b=this._get(f);b&&this.set(f,b)}},this);for(f in a)this.set(f,a[f])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(m.map(a,function(a){return a+"Rtl"})));c.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=
!0,m.forEach(this.getChildren(),function(a){a._started||a._destroyed||!v.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function f(f){f.destroyRecursive?f.destroyRecursive(a):f.destroy&&f.destroy(a)}this._beingDestroyed=!0;this.uninitialize();m.forEach(this._connects,v.hitch(this,"disconnect"));m.forEach(this._supportingWidgets,f);this.domNode&&m.forEach(q.findWidgets(this.domNode,
this.containerNode),f);this.destroyRendering(a);q.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?g.remove(this.domNode,"widgetId"):d.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||d.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){m.forEach(this.getChildren(),function(f){f.destroyRecursive&&f.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var f=
this.domNode;v.isObject(a)?B.set(f,a):f.style.cssText=f.style.cssText?f.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,f,b){b=3<=arguments.length?b:this.attributeMap[a];m.forEach(v.isArray(b)?b:[b],function(b){var r=this[b.node||b||"domNode"];switch(b.type||"attribute"){case "attribute":v.isFunction(f)&&(f=v.hitch(this,f));b=b.attribute?b.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;r.tagName?g.set(r,b,f):r.set(b,f);break;case "innerText":r.innerHTML="";r.appendChild(this.ownerDocument.createTextNode(f));
break;case "innerHTML":r.innerHTML=f;break;case "class":c.replace(r,f,this[a]);break;case "toggleClass":c.toggle(r,b.className||a,f)}},this)},get:function(a){var f=this._getAttrNames(a);return this[f.g]?this[f.g]():this._get(a)},set:function(a,f){if("object"===typeof a){for(var b in a)this.set(b,a[b]);return this}b=this._getAttrNames(a);var c=this[b.s];if(v.isFunction(c))var r=c.apply(this,Array.prototype.slice.call(arguments,1));else{var c=this.focusNode&&!v.isFunction(this.focusNode)?"focusNode":
"domNode",d=this[c]&&this[c].tagName,A;if((A=d)&&!(A=z[d])){A=this[c];var q={},y;for(y in A)q[y.toLowerCase()]=!0;A=z[d]=q}y=A;b=a in this.attributeMap?this.attributeMap[a]:b.s in this?this[b.s]:y&&b.l in y&&"function"!=typeof f||/^aria-|^data-|^role$/.test(a)?c:null;null!=b&&this._attrToDom(a,f,b);this._set(a,f)}return r||this},_attrPairNames:{},_getAttrNames:function(a){var f=this._attrPairNames;if(f[a])return f[a];var b=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});
return f[a]={n:a+"Node",s:"_set"+b+"Attr",g:"_get"+b+"Attr",l:b.toLowerCase()}},_set:function(a,f){var b=this[a];this[a]=f;!this._created||b===f||b!==b&&f!==f||(this._watchCallbacks&&this._watchCallbacks(a,b,f),this.emit("attrmodified-"+a,{detail:{prevValue:b,newValue:f}}))},_get:function(a){return this[a]},emit:function(f,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var r,A=this["on"+f];A&&(r=A.apply(this,c?
c:[b]));this._started&&!this._beingDestroyed&&a.emit(this.domNode,f.toLowerCase(),b);return r},on:function(f,b){var c=this._onMap(f);return c?k.after(this,c,b,!0):this.own(a(this.domNode,f,b))[0]},_onMap:function(a){var f=this.constructor,b=f._onMap;if(!b){var b=f._onMap={},c;for(c in f.prototype)/^on/.test(c)&&(b[c.replace(/^on/,"").toLowerCase()]=c)}return b["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?
q.findWidgets(this.containerNode):[]},getParent:function(){return q.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,f,b){return this.own(e.connect(a,f,this,b))[0]},disconnect:function(a){a.remove()},subscribe:function(a,f){return this.own(A.subscribe(a,v.hitch(this,f)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():b.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=B.get(this.domNode,"display")},
placeAt:function(a,f){var b=!a.tagName&&q.byId(a);!b||!b.addChild||f&&"number"!==typeof f?(b=b&&"domNode"in b?b.containerNode&&!/after|before|replace/.test(f||"")?b.containerNode:b.domNode:l.byId(a,this.ownerDocument),d.place(this.domNode,b,f),!this._started&&(this.getParent()||{})._started&&this.startup()):b.addChild(this,f);return this},defer:function(a,f){var b=setTimeout(v.hitch(this,function(){b&&(b=null,this._destroyed||v.hitch(this,a)())}),f||0);return{remove:function(){b&&(clearTimeout(b),
b=null);return null}}}});t("dojo-bidi")&&n.extend(u);return n})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(p,m,k){return k("dijit.Destroyable",null,{destroy:function(n){this._destroyed=!0},own:function(){var n=["destroyRecursive","destroy","remove"];p.forEach(arguments,function(e){function h(){g.remove();p.forEach(c,function(c){c.remove()})}var l,g=m.before(this,"destroy",function(c){e[l](c)}),c=[];e.then?(l="cancel",e.then(h,h)):p.forEach(n,
function(d){"function"===typeof e[d]&&(l||(l=d),c.push(m.after(e,d,h,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(p,m,k,n,e,h){p=n("dijit._OnDijitClickMixin",null,{connect:function(e,g,c){return this.inherited(arguments,[e,"ondijitclick"==g?h:g,c])}});p.a11yclick=h;return p})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],
function(p,m,k,n){n.extend(m,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return k("dijit._FocusMixin",null,{_focusManager:p})})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(p,m,k,n){k(function(){m("highcontrast")&&p.add(n.body(),"dijit_a11y")});return m})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),
function(p,m,k,n,e,h,l){e.add("highcontrast",function(){var g=l.doc.createElement("div");try{g.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(m.blankGif||p.toUrl("./resources/blank.gif"))+'");';l.body().appendChild(g);var c=n.getComputedStyle(g),d=c.backgroundImage;return c.borderTopColor==c.borderRightColor||d&&("none"==d||"url(invalid-url:)"==d)}catch(b){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+
b.toString()),!1}finally{8>=e("ie")?g.outerHTML="":l.body().removeChild(g)}});h(function(){e("highcontrast")&&k.add(l.body(),"dj_a11y")});return e})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),function(p,m,k,n,e,h,l,g,c,d,b,B,t,x,v,a){b("dijit-legacy-requires")&&a(0,function(){p(["dijit/MenuItem",
"dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return k("dijit.Menu",v,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):m.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return t.get(this._iframeContentDocument(a))||this._iframeContentDocument(a).__parent__||
a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(a){a=n.byId(a,this.ownerDocument);var f;if("iframe"==a.tagName.toLowerCase()){var b=a;f=this._iframeContentWindow(b);f=B.body(f.document)}else f=a==B.body(this.ownerDocument)?this.ownerDocument.documentElement:a;var y={node:a,iframe:b};e.set(a,"_dijitMenu"+this.id,
this._bindings.push(y));var t=c.hitch(this,function(a){var f=this.selector,c=f?function(a){return d.selector(f,a)}:function(a){return a},r=this;return[d(a,c(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();(new Date).getTime()<r._lastKeyDown+500||r._scheduleOpen(this,b,{x:a.pageX,y:a.pageY},a.target)}),d(a,c("keydown"),function(a){if(93==a.keyCode||a.shiftKey&&a.keyCode==g.F10||r.leftClickToOpen&&a.keyCode==g.SPACE)a.stopPropagation(),a.preventDefault(),
r._scheduleOpen(this,b,null,a.target),r._lastKeyDown=(new Date).getTime()})]});y.connects=f?t(f):[];b&&(y.onloadHandler=c.hitch(this,function(){var a=this._iframeContentWindow(b),a=B.body(a.document);y.connects=t(a)}),b.addEventListener?b.addEventListener("load",y.onloadHandler,!1):b.attachEvent("onload",y.onloadHandler))},unBindDomNode:function(a){var f;try{f=n.byId(a,this.ownerDocument)}catch(u){return}a="_dijitMenu"+this.id;if(f&&e.has(f,a)){for(var b=e.get(f,a)-1,c=this._bindings[b],d;d=c.connects.pop();)d.remove();
(d=c.iframe)&&(d.removeEventListener?d.removeEventListener("load",c.onloadHandler,!1):d.detachEvent("onload",c.onloadHandler));e.remove(f,a);delete this._bindings[b]}},_scheduleOpen:function(a,b,c,d){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:d,delegatedTarget:a,iframe:b,coords:c})},1))},_openMyself:function(a){function f(){k.refocus&&m&&m.focus();x.close(k)}var c=a.target,d=a.iframe,t=a.coords,g=!t;this.currentTarget=a.delegatedTarget;
if(t){if(d){a=h.position(d,!0);var c=this._iframeContentWindow(d),c=h.docScroll(c.document),q=l.getComputedStyle(d),e=l.toPixelValue,B=(b("ie")&&b("quirks")?0:e(d,q.paddingLeft))+(b("ie")&&b("quirks")?e(d,q.borderLeftWidth):0),d=(b("ie")&&b("quirks")?0:e(d,q.paddingTop))+(b("ie")&&b("quirks")?e(d,q.borderTopWidth):0);t.x+=a.x+B-c.x;t.y+=a.y+d-c.y}}else t=h.position(c,!0),t.x+=10,t.y+=10;var k=this,d=this._focusManager.get("prevNode");a=this._focusManager.get("curNode");var m=!a||n.isDescendant(a,
this.domNode)?d:a;x.open({popup:this,x:t.x,y:t.y,onExecute:f,onCancel:f,orient:this.isLeftToRight()?"L":"R"});this.focus();g||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);x.close(this)}},destroy:function(){m.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),
function(p,m,k,n,e,h,l,g,c,d,b,B,t,x,v,a){function f(){this._popupWrapper&&(h.destroy(this._popupWrapper),delete this._popupWrapper)}k=k(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var a=this._firstAroundPosition,f=l.position(this._firstAroundNode,!0),c=f.x-a.x,a=f.y-a.y;if(c||a)for(this._firstAroundPosition=f,f=0;f<this._stack.length;f++){var d=this._stack[f].wrapper.style;d.top=parseFloat(d.top)+a+"px";"auto"==d.right?d.left=parseFloat(d.left)+c+
"px":d.right=parseFloat(d.right)-c+"px"}this._aroundMoveListener=setTimeout(b.hitch(this,"_repositionAll"),c||a?10:50)}},_createWrapper:function(a){var b=a._popupWrapper,c=a.domNode;b||(b=h.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),b.appendChild(c),c=c.style,c.display="",c.visibility="",c.position="",c.top="0px",a._popupWrapper=b,m.after(a,"destroy",f,!0),"ontouchend"in document&&B(b,"touchend",
function(a){/^(input|button|textarea)$/i.test(a.target.tagName)||a.preventDefault()}),b.dojoClick=!0);return b},moveOffScreen:function(a){var b=this._createWrapper(a);a=l.isBodyLtr(a.ownerDocument);var f={visibility:"hidden",top:"-9999px",display:""};f[a?"left":"right"]="-9999px";f[a?"right":"left"]="auto";g.set(b,f);return b},hide:function(a){var b=this._createWrapper(a);g.set(b,{display:"none",height:"auto",overflowY:"visible",border:""});a=a.domNode;"_originalStyle"in a&&(a.style.cssText=a._originalStyle)},
getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(a){for(var f=this._stack,r=a.popup,w=r.domNode,u=a.orient||["below","below-alt","above","above-alt"],q=a.parent?a.parent.isLeftToRight():l.isBodyLtr(r.ownerDocument),h=a.around,k=a.around&&a.around.id?a.around.id+"_dropdown":"popup_"+this._idGen++;f.length&&(!a.parent||!n.isDescendant(a.parent.domNode,f[f.length-1].widget.domNode));)this.close(f[f.length-1].widget);var m=this.moveOffScreen(r);
r.startup&&!r._started&&r.startup();var p,J=l.position(w);if("maxHeight"in a&&-1!=a.maxHeight)p=a.maxHeight||Infinity;else{p=v.getEffectiveBox(this.ownerDocument);var P=h?l.position(h,!1):{y:a.y-(a.padding||0),h:2*(a.padding||0)};p=Math.floor(Math.max(P.y,p.h-(P.y+P.h)))}J.h>p&&(J=g.getComputedStyle(w),g.set(m,{overflowY:"scroll",height:p+"px",border:J.borderLeftWidth+" "+J.borderLeftStyle+" "+J.borderLeftColor}),w._originalStyle=w.style.cssText,w.style.border="none");e.set(m,{id:k,style:{zIndex:this._beginZIndex+
f.length},"class":"dijitPopup "+(r.baseClass||r["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:a.parent?a.parent.id:""});0==f.length&&h&&(this._firstAroundNode=h,this._firstAroundPosition=l.position(h,!0),this._aroundMoveListener=setTimeout(b.hitch(this,"_repositionAll"),50));c("config-bgIframe")&&!r.bgIframe&&(r.bgIframe=new x(m));k=r.orient?b.hitch(r,"orient"):null;u=h?t.around(m,h,u,q,k):t.at(m,a,"R"==u?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],a.padding,k);m.style.visibility="visible";
w.style.visibility="visible";w=[];w.push(B(m,"keydown",b.hitch(this,function(b){if(b.keyCode==d.ESCAPE&&a.onCancel)b.stopPropagation(),b.preventDefault(),a.onCancel();else if(b.keyCode==d.TAB&&(b.stopPropagation(),b.preventDefault(),(b=this.getTopPopup())&&b.onCancel))b.onCancel()})));r.onCancel&&a.onCancel&&w.push(r.on("cancel",a.onCancel));w.push(r.on(r.onExecute?"execute":"change",b.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));f.push({widget:r,wrapper:m,parent:a.parent,
onExecute:a.onExecute,onCancel:a.onCancel,onClose:a.onClose,handlers:w});if(r.onOpen)r.onOpen(u);return u},close:function(a){for(var b=this._stack;a&&p.some(b,function(b){return b.widget==a})||!a&&b.length;){var f=b.pop(),c=f.widget,d=f.onClose;c.bgIframe&&(c.bgIframe.destroy(),delete c.bgIframe);if(c.onClose)c.onClose();for(var t;t=f.handlers.pop();)t.remove();c&&c.domNode&&this.hide(c);d&&d()}0==b.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=
this._aroundMoveListener=null)}});return a.popup=new k})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(p,m,k,n,e,h,l){function g(c,b,g,t){var d=h.getEffectiveBox(c.ownerDocument);c.parentNode&&"body"==String(c.parentNode.tagName).toLowerCase()||e.body(c.ownerDocument).appendChild(c);var l=null;p.some(b,function(a){var b=a.corner,f=a.pos,r=0,e={w:{L:d.l+d.w-f.x,R:f.x-d.l,M:d.w}[b.charAt(1)],
h:{T:d.t+d.h-f.y,B:f.y-d.t,M:d.h}[b.charAt(0)]},q=c.style;q.left=q.right="auto";g&&(r=g(c,a.aroundCorner,b,e,t),r="undefined"==typeof r?0:r);var h=c.style,k=h.display,n=h.visibility;"none"==h.display&&(h.visibility="hidden",h.display="");q=m.position(c);h.display=k;h.visibility=n;k={L:f.x,R:f.x-q.w,M:Math.max(d.l,Math.min(d.l+d.w,f.x+(q.w>>1))-q.w)}[b.charAt(1)];n={T:f.y,B:f.y-q.h,M:Math.max(d.t,Math.min(d.t+d.h,f.y+(q.h>>1))-q.h)}[b.charAt(0)];f=Math.max(d.l,k);h=Math.max(d.t,n);k=Math.min(d.l+d.w,
k+q.w)-f;n=Math.min(d.t+d.h,n+q.h)-h;r+=q.w-k+(q.h-n);if(null==l||r<l.overflow)l={corner:b,aroundCorner:a.aroundCorner,x:f,y:h,w:k,h:n,overflow:r,spaceAvailable:e};return!r});l.overflow&&g&&g(c,l.aroundCorner,l.corner,l.spaceAvailable,t);b=l.y;var a=l.x,f=e.body(c.ownerDocument);/relative|absolute/.test(k.get(f,"position"))&&(b-=k.get(f,"marginTop"),a-=k.get(f,"marginLeft"));f=c.style;f.top=b+"px";f.left=a+"px";f.right="auto";return l}var c={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return l.place={at:function(d,
b,e,t,h){e=p.map(e,function(d){var a={corner:d,aroundCorner:c[d],pos:{x:b.x,y:b.y}};t&&(a.pos.x+="L"==d.charAt(1)?t.x:-t.x,a.pos.y+="T"==d.charAt(0)?t.y:-t.y);return a});return g(d,e,h)},around:function(c,b,e,t,h){function d(a,b){F.push({aroundCorner:a,corner:b,pos:{x:{L:u,R:u+x,M:u+(x>>1)}[a.charAt(1)],y:{T:q,B:q+z,M:q+(z>>1)}[a.charAt(0)]}})}var a;if("string"==typeof b||"offsetWidth"in b||"ownerSVGElement"in b){if(a=m.position(b,!0),/^(above|below)/.test(e[0])){var f=m.getBorderExtents(b),r=b.firstChild?
m.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0},A=m.getBorderExtents(c),l=c.firstChild?m.getBorderExtents(c.firstChild):{t:0,l:0,b:0,r:0};a.y+=Math.min(f.t+r.t,A.t+l.t);a.h-=Math.min(f.t+r.t,A.t+l.t)+Math.min(f.b+r.b,A.b+l.b)}}else a=b;if(b.parentNode)for(f="absolute"==k.getComputedStyle(b).position,b=b.parentNode;b&&1==b.nodeType&&"BODY"!=b.nodeName;){r=m.position(b,!0);A=k.getComputedStyle(b);/relative|absolute/.test(A.position)&&(f=!1);if(!f&&/hidden|auto|scroll/.test(A.overflow)){var l=Math.min(a.y+
a.h,r.y+r.h),B=Math.min(a.x+a.w,r.x+r.w);a.x=Math.max(a.x,r.x);a.y=Math.max(a.y,r.y);a.h=l-a.y;a.w=B-a.x}"absolute"==A.position&&(f=!0);b=b.parentNode}var u=a.x,q=a.y,x="w"in a?a.w:a.w=a.width,z="h"in a?a.h:(n.deprecated("place.around: dijit/place.__Rectangle: { x:"+u+", y:"+q+", height:"+a.height+", width:"+x+" } has been deprecated.  Please use { x:"+u+", y:"+q+", h:"+a.height+", w:"+x+" }","","2.0"),a.h=a.height),F=[];p.forEach(e,function(a){var b=t;switch(a){case "above-centered":d("TM","BM");
break;case "below-centered":d("BM","TM");break;case "after-centered":b=!b;case "before-centered":d(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":d(b?"TL":"TR",b?"TR":"TL");d(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":d(b?"BL":"BR",b?"TL":"TR");d(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":d(b?"TL":"TR",b?"BL":"BR");d(b?"TR":"TL",b?"BR":"BL");break;default:d(a.aroundCorner,a.corner)}});c=g(c,F,h,{w:x,h:z});c.aroundNodePos=a;return c}}})},
"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(p,m,k,n,e){var h=new p,l;k(function(){var g=e.getBox();h._rlh=m(window,"resize",function(){var c=e.getBox();if(g.h!=c.h||g.w!=c.w)g=c,h.emit("resize")});if(8==n("ie")){var c=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=c&&(c=screen.deviceXDPI,h.emit("resize"))},500)}n("ios")&&(m(document,"focusin",function(c){l=c.target}),m(document,"focusout",function(c){l=null}))});h.getEffectiveBox=
function(g){g=e.getBox(g);var c=l&&l.tagName&&l.tagName.toLowerCase();n("ios")&&l&&!l.readOnly&&("textarea"==c||"input"==c&&/^(color|email|number|password|search|tel|text|url)$/.test(l.type))&&(g.h*=0==orientation||180==orientation?.66:.4,c=l.getBoundingClientRect(),g.h=Math.max(g.h,c.top+c.height));return g};return h})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(p,m,k,n,e,h,
l,g){g.add("config-bgIframe",(g("ie")||g("trident"))&&!/IEMobile\/10\.0/.test(navigator.userAgent));var c=new function(){var c=[];this.pop=function(){var b;c.length?(b=c.pop(),b.style.display=""):(9>g("ie")?(b=k.dojoBlankHtmlUrl||p.toUrl("dojo/resources/blank.html")||'javascript:""',b=document.createElement("\x3ciframe src\x3d'"+b+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")):(b=n.create("iframe"),b.src='javascript:""',
b.className="dijitBackgroundIframe",b.setAttribute("role","presentation"),e.set(b,"opacity",.1)),b.tabIndex=-1);return b};this.push=function(b){b.style.display="none";c.push(b)}};m.BackgroundIframe=function(d){if(!d.id)throw Error("no id");if(g("config-bgIframe")){var b=this.iframe=c.pop();d.appendChild(b);7>g("ie")||g("quirks")?(this.resize(d),this._conn=l(d,"resize",h.hitch(this,"resize",d))):e.set(b,{width:"100%",height:"100%"})}};h.extend(m.BackgroundIframe,{resize:function(c){this.iframe&&e.set(this.iframe,
{width:c.offsetWidth+"px",height:c.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),c.push(this.iframe),delete this.iframe)}});return m.BackgroundIframe})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(p,m,k,n){return p("dijit.DropDownMenu",n,{templateString:k,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},
_onDownArrow:function(){this.focusNext()},_onRightArrow:function(e){this._moveToPopup(e);e.stopPropagation();e.preventDefault()},_onLeftArrow:function(e){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else e.stopPropagation(),e.preventDefault()}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(p,m,k,n,e,h,l,g,c,d,b,B,t,x,v){return m("dijit._MenuBase",[B,v,x,t],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){e.toggle(this.domNode,"dijitMenuActive",a);e.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,
childSelector:function(a){var f=b.byNode(a);return a.parentNode==this.containerNode&&f&&f.focus},postCreate:function(){var a=this,f="string"==typeof this.childSelector?this.childSelector:h.hitch(this,"childSelector");this.own(g(this.containerNode,g.selector(f,l.enter),function(){a.onItemHover(b.byNode(this))}),g(this.containerNode,g.selector(f,l.leave),function(){a.onItemUnhover(b.byNode(this))}),g(this.containerNode,g.selector(f,d),function(f){a.onItemClick(b.byNode(this),f);f.stopPropagation()}),
g(this.containerNode,g.selector(f,"focusin"),function(){a._onItemFocus(b.byNode(this))}));this.inherited(arguments)},onKeyboardSearch:function(a,b,c,d){this.inherited(arguments);if(a&&(-1==d||a.popup&&1==d))this.onItemClick(a,b)},_keyboardSearchCompare:function(a,b){return a.shortcutKey?b==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,
a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),!a.popup||a.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,
{type:"click"})},this.passivePopupDelay));this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",
!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;if(a.popup){this.set("selected",a);this.set("activated",!0);var f=/^key/.test(b._origType||
b.type)||0==b.clientX&&0==b.clientY;this._openItemPopup(a,f)}else this.onExecute(),a._onClick?a._onClick(b):a.onClick(b)},_openItemPopup:function(a,b){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var f=a.popup;f.parentMenu=this;this.own(this._mouseoverHandle=g.once(f.domNode,"mouseover",h.hitch(this,"_onPopupHover")));var c=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){b&&
c.focusChild(a);c._cleanUp()},onExecute:h.hitch(this,"_cleanUp",!0),onClose:function(){c._mouseoverHandle&&(c._mouseoverHandle.remove(),delete c._mouseoverHandle)}},b);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(n.set(this.selected.focusNode,"tabIndex",this.tabIndex),
this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),
function(p,m,k,n,e,h,l,g,c,d,b,B){m=m("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);p.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(b){this.watch(b,h.hitch(this,"_setStateClass"))},this);for(var b in this.cssStateNodes||{})this._trackMouseState(this[b],this.cssStateNodes[b]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(b){if(!this.disabled)switch(b.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function b(a){c=c.concat(p.map(c,function(b){return b+a}),"dijit"+a)}var c=this.baseClass.split(" ");
this.isLeftToRight()||b("Rtl");var d="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&b(d);this.state&&b(this.state);this.selected&&b("Selected");this._opened&&b("Opened");this.disabled?b("Disabled"):this.readOnly?b("ReadOnly"):this.active?b("Active"):this.hovering&&b("Hover");this.focused&&b("Focused");var d=this.stateNode||this.domNode,a={};p.forEach(d.className.split(" "),function(b){a[b]=!0});"_stateClasses"in this&&p.forEach(this._stateClasses,function(b){delete a[b]});p.forEach(c,
function(b){a[b]=!0});var f=[],g;for(g in a)f.push(g);d.className=f.join(" ");this._stateClasses=c},_subnodeCssMouseEvent:function(b,c,d){function a(a){n.toggle(b,c+"Active",a)}if(!this.disabled&&!this.readOnly)switch(d.type){case "mouseover":case "MSPointerOver":case "pointerover":n.toggle(b,c+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":n.toggle(b,c+"Hover",!1);a(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":a(!0);
break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":a(!1);break;case "focus":case "focusin":n.toggle(b,c+"Focused",!0);break;case "blur":case "focusout":n.toggle(b,c+"Focused",!1)}},_trackMouseState:function(b,c){b._cssState=c}});g(function(){function g(a,b,c){if(!c||!k.isDescendant(c,b))for(;b&&b!=c;b=b.parentNode)if(b._cssState){var f=B.getEnclosingWidget(b);f&&(b==f.domNode?f._cssMouseEvent(a):f._subnodeCssMouseEvent(b,b._cssState,a))}}var e=d.body(),h;l(e,
c.over,function(a){g(a,a.target,a.relatedTarget)});l(e,c.out,function(a){g(a,a.target,a.relatedTarget)});l(e,b.press,function(a){h=a.target;g(a,h)});l(e,b.release,function(a){g(a,h);h=null});l(e,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=B.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})});return m})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),
function(p,m,k,n,e,h,l,g,c,d){return m("dijit._KeyNavContainer",[c,d,g],{connectKeyNavHandlers:function(b,c){var d=this._keyNavCodes={},g=h.hitch(this,"focusPrev"),l=h.hitch(this,"focusNext");p.forEach(b,function(a){d[a]=g});p.forEach(c,function(a){d[a]=l});d[e.HOME]=h.hitch(this,"focusFirstChild");d[e.END]=h.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){n.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);p.forEach(this.getChildren(),
h.hitch(this,"_startupChild"))},addChild:function(b,c){this.inherited(arguments);this._startupChild(b)},_startupChild:function(b){b.set("tabIndex","-1")},_getFirst:function(){var b=this.getChildren();return b.length?b[0]:null},_getLast:function(){var b=this.getChildren();return b.length?b[b.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(b){return(b=
l.byNode(b))&&b.getParent()==this}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(p,m,k,n){return m("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(e,h){var l=this.containerNode;if(0<h){for(l=l.firstChild;0<h;)1==l.nodeType&&h--,l=l.nextSibling;l?h="before":(l=this.containerNode,h="last")}k.place(e.domNode,l,h);
this._started&&!e._started&&e.startup()},removeChild:function(e){"number"==typeof e&&(e=this.getChildren()[e]);e&&(e=e.domNode)&&e.parentNode&&e.parentNode.removeChild(e)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(e,h){var l=this.getChildren(),g=p.indexOf(l,e);return l[g+h]},getIndexOfChild:function(e){return p.indexOf(this.getChildren(),e)}})})},"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),
function(p,m,k,n,e,h,l,g){return m("dijit._KeyNavMixin",g,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);k.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var c=this._keyNavCodes={};c[n.HOME]=e.hitch(this,"focusFirstChild");c[n.END]=e.hitch(this,"focusLastChild");c[this.isLeftToRight()?n.LEFT_ARROW:n.RIGHT_ARROW]=e.hitch(this,"_onLeftArrow");c[this.isLeftToRight()?n.RIGHT_ARROW:n.LEFT_ARROW]=e.hitch(this,"_onRightArrow");c[n.UP_ARROW]=e.hitch(this,
"_onUpArrow");c[n.DOWN_ARROW]=e.hitch(this,"_onDownArrow")}var d=this,c="string"==typeof this.childSelector?this.childSelector:e.hitch(this,"childSelector");this.own(h(this.domNode,"keypress",e.hitch(this,"_onContainerKeypress")),h(this.domNode,"keydown",e.hitch(this,"_onContainerKeydown")),h(this.domNode,"focus",e.hitch(this,"_onContainerFocus")),h(this.containerNode,h.selector(c,"focusin"),function(b){d._onChildFocus(l.getEnclosingWidget(this),b)}))},_onLeftArrow:function(){},_onRightArrow:function(){},
_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(c,d){c&&(this.focusedChild&&c!==this.focusedChild&&this._onChildBlur(this.focusedChild),
c.set("tabIndex",this.tabIndex),c.focus(d?"end":"start"))},_onContainerFocus:function(c){c.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){k.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(c){k.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(c){c&&c!=this.focusedChild&&
(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),c.set("tabIndex",this.tabIndex),this.lastFocused=c,this._set("focusedChild",c))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(c,d,b,g){c&&this.focusChild(c)},_keyboardSearchCompare:function(c,d){var b=c.domNode,b=(c.label||(b.focusNode?b.focusNode.label:"")||b.innerText||b.textContent||"").replace(/^\s+/,"").substr(0,d.length).toLowerCase();return d.length&&b==d?-1:0},_isFormElement:function(c){return"INPUT"===
c.tagName||"TEXTAREA"===c.tagName||"SELECT"===c.tagName||"BUTTON"===c.tagName},_onContainerKeydown:function(c){if(!this._isFormElement(document.activeElement)){var d=this._keyNavCodes[c.keyCode];d?(d(c,this.focusedChild),c.stopPropagation(),c.preventDefault(),this._searchString=""):c.keyCode!=n.SPACE||!this._searchTimer||c.ctrlKey||c.altKey||c.metaKey||(c.stopImmediatePropagation(),c.preventDefault(),this._keyboardSearch(c," "))}},_onContainerKeypress:function(c){this._isFormElement(document.activeElement)||
c.charCode<=n.SPACE||c.ctrlKey||c.altKey||c.metaKey||(c.preventDefault(),c.stopPropagation(),this._keyboardSearch(c,String.fromCharCode(c.charCode).toLowerCase()))},_keyboardSearch:function(c,d){var b=null,g,t=0;e.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=d;var c=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;g=this._searchString.substr(0,c);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);
var e=this.focusedChild||null;if(1==c||!e)if(e=this._getNextFocusableChild(e,1),!e)return;c=e;do{var a=this._keyboardSearchCompare(e,g);a&&0==t++&&(b=e);if(-1==a){t=-1;break}e=this._getNextFocusableChild(e,1)}while(e&&e!=c)})();this.onKeyboardSearch(b,c,g,t)},_onChildBlur:function(){},_getNextFocusableChild:function(c,d){var b=c;do{if(c)c=this._getNext(c,d);else if(c=this[0<d?"_getFirst":"_getLast"](),!c)break;if(null!=c&&c!=b&&c.isFocusable())return c}while(c!=b);return null},_getFirst:function(){return null},
_getLast:function(){return null},_getNext:function(c,d){if(c)for(c=c.domNode;c;)if((c=c[0>d?"previousSibling":"nextSibling"])&&"getAttribute"in c){var b=l.byNode(c);if(b)return b}return null}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(p,m,k,n,e,h,l,g){var c=m("dijit._TemplatedMixin",g,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,
_stringRepl:function(c){var b=this.declaredClass,d=this;return l.substitute(c,this,function(c,g){"!"==g.charAt(0)&&(c=n.getObject(g.substr(1),!1,d));if("undefined"==typeof c)throw Error(b+" template:"+g);return null==c?"":"!"==g.charAt(0)?c:this._escapeValue(""+c)},this)},_escapeValue:function(c){return c.replace(/["'<>&]/g,function(b){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[b]})},buildRendering:function(){if(!this._rendered){this.templateString||
(this.templateString=p(this.templatePath,{sanitize:!0}));var d=c.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),b;if(n.isString(d)){if(b=k.toDom(this._stringRepl(d),this.ownerDocument),1!=b.nodeType)throw Error("Invalid template: "+d);}else b=d.cloneNode(!0);this.domNode=b}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(c){var b=this.containerNode;if(c&&b)for(;c.hasChildNodes();)b.appendChild(c.firstChild)}});
c._templateCache={};c.getCachedTemplate=function(d,b,g){var e=c._templateCache,h=d,n=e[h];if(n){try{if(!n.ownerDocument||n.ownerDocument==(g||document))return n}catch(a){}k.destroy(n)}d=l.trim(d);if(b||d.match(/\$\{([^\}]+)\}/g))return e[h]=d;b=k.toDom(d,g);if(1!=b.nodeType)throw Error("Invalid template: "+d);return e[h]=b};h("ie")&&e(window,"unload",function(){var d=c._templateCache,b;for(b in d){var g=d[b];"object"==typeof g&&k.destroy(g);delete d[b]}});return c})},"dojo/cache":function(){define(["./_base/kernel",
"./text"],function(p){return p.cache})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(p,m,k,n,e,h,l,g,c){var d=e.delegate(g,{mouseenter:h.enter,mouseleave:h.leave,keypress:k._keypress}),b;k=n("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);
this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(b){for(var c=b;;)if(1==c.nodeType&&(this._processTemplateNode(c,function(b,c){return b.getAttribute(c)},this._attach)||this.searchContainerNode)&&c.firstChild)c=c.firstChild;else{if(c==b)break;for(;!c.nextSibling;)if(c=c.parentNode,c==b)return;c=c.nextSibling}},_processTemplateNode:function(b,c,d){var g=!0,a=this.attachScope||this,f=c(b,"dojoAttachPoint")||c(b,"data-dojo-attach-point");if(f)for(var r=f.split(/\s*,\s*/);f=
r.shift();)e.isArray(a[f])?a[f].push(b):a[f]=b,g="containerNode"!=f,this._attachPoints.push(f);if(c=c(b,"dojoAttachEvent")||c(b,"data-dojo-attach-event"))for(f=c.split(/\s*,\s*/),r=e.trim;c=f.shift();)if(c){var h=null;-1!=c.indexOf(":")?(h=c.split(":"),c=r(h[0]),h=r(h[1])):c=r(c);h||(h=c);this._attachEvents.push(d(b,c,e.hitch(a,h)))}return g},_attach:function(c,g,e){g=g.replace(/^on/,"").toLowerCase();g="dijitclick"==g?b||(b=p("./a11yclick")):d[g]||g;return l(c,g,e)},_detachTemplateNodes:function(){var b=
this.attachScope||this;m.forEach(this._attachPoints,function(c){delete b[c]});this._attachPoints=[];m.forEach(this._attachEvents,function(b){b.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});e.extend(c,{dojoAttachEvent:"",dojoAttachPoint:""});return k})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),
function(p,m,k,n,e,h,l,g,c,d,b,B){l=p("dijit.MenuItem"+(h("dojo-bidi")?"_NoBidi":""),[g,c,d,b],{templateString:B,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(b){this._set("label",b);var c="",d;d=b.search(/{\S}/);if(0<=d){var c=b.charAt(d+1),a=b.substr(0,d);b=b.substr(d+3);d=a+c+b;b=a+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+c+"\x3c/span\x3e"+b}else d=b;this.domNode.setAttribute("aria-label",d+" "+this.accelKey);this.containerNode.innerHTML=b;this._set("shortcutKey",c)},iconClass:"dijitNoIcon",
_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(b){!b||"label"in this.params||this._set("label",b.innerHTML)},buildRendering:function(){this.inherited(arguments);k.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&k.set(this.accelKeyNode,"id",this.id+"_accel");m.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==h("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(t){}},_setSelected:function(b){n.toggle(this.domNode,
"dijitMenuItemSelected",b)},setLabel:function(b){e.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",b)},setDisabled:function(b){e.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",b)},_setDisabledAttr:function(b){this.focusNode.setAttribute("aria-disabled",b?"true":"false");this._set("disabled",b)},_setAccelKeyAttr:function(b){this.accelKeyNode&&(this.accelKeyNode.style.display=
b?"":"none",this.accelKeyNode.innerHTML=b,k.set(this.containerNode,"colSpan",b?"1":"2"));this._set("accelKey",b)}});h("dojo-bidi")&&(l=p("dijit.MenuItem",l,{_setLabelAttr:function(b){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));return l})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(p,m){return p("dijit._Contained",null,{_getSibling:function(k){var n=this.getParent();return n&&n._getSiblingOfChild&&n._getSiblingOfChild(this,
"previous"==k?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var k=this.getParent();return k&&k.getIndexOfChild?k.getIndexOfChild(this):-1}})})},"esri/tasks/AreasAndLengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel".split(" "),function(p,m,k,n,e,h){p=p(null,{declaredClass:"esri.tasks.AreasAndLengthsParameters",
polygons:null,lengthUnit:null,areaUnit:null,calculationType:null,toJson:function(){var e=k.map(this.polygons,function(c){return c.toJson()}),g={};g.polygons=n.toJson(e);e=this.polygons[0].spatialReference;g.sr=e.wkid?e.wkid:n.toJson(e.toJson());this.lengthUnit&&(g.lengthUnit=this.lengthUnit);this.areaUnit&&(m.isString(this.areaUnit)?g.areaUnit=n.toJson({areaUnit:this.areaUnit}):g.areaUnit=this.areaUnit);this.calculationType&&(g.calculationType=this.calculationType);return g}});e("extend-esri")&&m.setObject("tasks.AreasAndLengthsParameters",
p,h);return p})},"esri/tasks/LengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel".split(" "),function(p,m,k,n,e,h){p=p(null,{declaredClass:"esri.tasks.LengthsParameters",polylines:null,lengthUnit:null,geodesic:null,calculationType:null,toJson:function(){var e=k.map(this.polylines,function(c){return c.toJson()}),g={};g.polylines=n.toJson(e);e=this.polylines[0].spatialReference;g.sr=e.wkid?e.wkid:n.toJson(e.toJson());this.lengthUnit&&
(g.lengthUnit=this.lengthUnit);this.geodesic&&(g.geodesic=this.geodesic);this.calculationType&&(g.calculationType=this.calculationType);return g}});e("extend-esri")&&m.setObject("tasks.LengthsParameters",p,h);return p})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
function(p,m,k,n,e,h,l,g,c,d,b,B,t,x,v){p=p(d,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],
"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(a){a=m.hitch;this._projectHandler=a(this,this._projectHandler);this._simplifyHandler=a(this,this._simplifyHandler);this._bufferHandler=a(this,this._bufferHandler);this._areasAndLengthsHandler=a(this,this._areasAndLengthsHandler);this._lengthsHandler=
a(this,this._lengthsHandler);this._labelPointsHandler=a(this,this._labelPointsHandler);this._relationHandler=a(this,this._relationHandler);this._convexHullHandler=a(this,this._convexHullHandler);this._unionHandler=a(this,this._unionHandler);this._autoCompleteHandler=a(this,this._autoCompleteHandler);this._reshapeHandler=a(this,this._reshapeHandler);this._cutHandler=a(this,this._cutHandler);this._intersectHandler=a(this,this._intersectHandler);this._differenceHandler=a(this,this._differenceHandler);
this._trimExtendHandler=a(this,this._trimExtendHandler);this._densifyHandler=a(this,this._densifyHandler);this._generalizeHandler=a(this,this._densifyHandler);this._offsetHandler=a(this,this._offsetHandler);this._distanceHandler=a(this,this._distanceHandler);this._toGeoCoordinateHandler=a(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=a(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(a){var b=[],c,d=a.length;for(c=0;c<d;c++)b.push(a[c].toJson());
return{geometryType:v.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,b,c){var f=v.getGeometryType(b);a=a.geometries;var d=[],g={spatialReference:c.toJson()},e=m.mixin;k.forEach(a,function(a,b){d[b]=new f(e(a,g))});return d},_toProjectGeometry:function(a){var c=a.spatialReference.toJson();return a instanceof b?new t({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:c}):new B({paths:[[].concat(a.points)],spatialReference:c})},
_fromProjectedGeometry:function(a,c,d){return"esriGeometryEnvelope"===c?(a=a.rings[0],new b(a[0][0],a[0][1],a[2][0],a[2][1],d)):new x({points:a.paths[0],spatialReference:d.toJson()})},project:function(a,b,d,h){var f=m.mixin({},this._url.query,{f:"json"}),r;a.geometries?(h=d,d=b,b=a.outSR,r=a.geometries[0],f=m.mixin(f,a.toJson())):(r=a[0],f=m.mixin(f,{outSR:b.wkid||n.toJson(b.toJson()),inSR:r.spatialReference.wkid||n.toJson(r.spatialReference.toJson()),geometries:n.toJson(this._encodeGeometries(a))}));
var l=v.getJsonType(r),q=this._projectHandler,k=this._errorHandler,A=new e(c._dfdCanceller);A._pendingDfd=g({url:this._url.path+"/project",content:f,callbackParamName:"callback",load:function(a,c){q(a,c,l,b,d,h,A)},error:function(a){k(a,h,A)}});return A},_projectHandler:function(a,b,c,d,g,e,h){try{var f=this._decodeGeometries(a,c,d);this._successHandler([f],"onProjectComplete",g,h)}catch(D){this._errorHandler(D,e,h)}},onProjectComplete:function(){},simplify:function(a,b,d){var f=a[0].spatialReference,
h=m.mixin({},this._url.query,{f:"json",sr:f.wkid?f.wkid:n.toJson(f.toJson()),geometries:n.toJson(this._encodeGeometries(a))}),r=v.getJsonType(a[0]),l=this._simplifyHandler,q=this._errorHandler,k=new e(c._dfdCanceller);k._pendingDfd=g({url:this._url.path+"/simplify",content:h,callbackParamName:"callback",load:function(a,c){l(a,c,r,f,b,d,k)},error:function(a){q(a,d,k)}});return k},_simplifyHandler:function(a,b,c,d,g,e,h){try{var f=this._decodeGeometries(a,c,d);this._successHandler([f],"onSimplifyComplete",
g,h)}catch(D){this._errorHandler(D,e,h)}},onSimplifyComplete:function(){},convexHull:function(a,b,d){var f=a[0].spatialReference;a=m.mixin({},this._url.query,{f:"json",sr:n.toJson(f.toJson()),geometries:n.toJson(this._encodeGeometries(a))});var h=this._convexHullHandler,r=this._errorHandler,k=new e(c._dfdCanceller);k._pendingDfd=g({url:this._url.path+"/convexHull",content:a,callbackParamName:"callback",load:function(a,c){h(a,c,f,b,d,k)},error:function(a){r(a,d,k)}});return k},_convexHullHandler:function(a,
b,c,d,g,e){try{var f=v.fromJson(a.geometry).setSpatialReference(c);this._successHandler([f],"onConvexHullComplete",d,e)}catch(q){this._errorHandler(q,g,e)}},onConvexHullComplete:function(){},union:function(a,b,d){var f=a[0].spatialReference;a=m.mixin({},this._url.query,{f:"json",sr:n.toJson(f.toJson()),geometries:n.toJson(this._encodeGeometries(a))});var h=this._unionHandler,r=this._errorHandler,k=new e(c._dfdCanceller);k._pendingDfd=g({url:this._url.path+"/union",content:a,callbackParamName:"callback",
load:function(a,c){h(a,c,f,b,d,k)},error:function(a){r(a,d,k)}});return k},_unionHandler:function(a,b,c,d,g,e){try{var f=v.fromJson(a.geometry).setSpatialReference(c);this._successHandler([f],"onUnionComplete",d,e)}catch(q){this._errorHandler(q,g,e)}},onUnionComplete:function(){},autoComplete:function(a,b,d,h){var f=a[0].spatialReference;a=m.mixin({},this._url.query,{f:"json",sr:n.toJson(f.toJson()),polygons:n.toJson(this._encodeGeometries(a).geometries),polylines:n.toJson(this._encodeGeometries(b).geometries)});
var r=this._autoCompleteHandler,k=this._errorHandler,q=new e(c._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/autoComplete",content:a,callbackParamName:"callback",load:function(a,b){r(a,b,f,d,h,q)},error:function(a){k(a,h,q)}});return q},_autoCompleteHandler:function(a,b,c,d,g,e){try{var f=a.geometries;a=[];var q,h=f.length;for(q=0;q<h;q++)a[q]=new t({spatialReference:c,rings:f[q].rings});this._successHandler([a],"onAutoCompleteComplete",d,e)}catch(z){this._errorHandler(z,g,e)}},onAutoCompleteComplete:function(){},
reshape:function(a,b,d,h){var f=a.spatialReference;a=m.mixin({},this._url.query,{f:"json",sr:n.toJson(f.toJson()),target:n.toJson({geometryType:v.getJsonType(a),geometry:a.toJson()}),reshaper:n.toJson(b.toJson())});var r=this._reshapeHandler,k=this._errorHandler,q=new e(c._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/reshape",content:a,callbackParamName:"callback",load:function(a,b){r(a,b,f,d,h,q)},error:function(a){k(a,h,q)}});return q},_reshapeHandler:function(a,b,c,d,g,e){try{var f=v.fromJson(a.geometry).setSpatialReference(c);
this._successHandler([f],"onReshapeComplete",d,e)}catch(q){this._errorHandler(q,g,e)}},onReshapeComplete:function(){},cut:function(a,b,d,h){var f=a[0].spatialReference,r=k.map(a,function(a){return a.toJson()});a=m.mixin({},this._url.query,{f:"json",sr:n.toJson(f.toJson()),target:n.toJson({geometryType:v.getJsonType(a[0]),geometries:r}),cutter:n.toJson(b.toJson())});var l=this._cutHandler,q=this._errorHandler,t=new e(c._dfdCanceller);t._pendingDfd=g({url:this._url.path+"/cut",content:a,callbackParamName:"callback",
load:function(a,b){l(a,b,f,d,h,t)},error:function(a){q(a,h,t)}});return t},_cutHandler:function(a,b,c,d,g,e){try{var f=a.geometries,h={};h.cutIndexes=a.cutIndexes;h.geometries=[];k.forEach(f,function(a){h.geometries.push(v.fromJson(a).setSpatialReference(c))});this._successHandler([h],"onCutComplete",d,e)}catch(D){this._errorHandler(D,g,e)}},onCutComplete:function(){},intersect:function(a,b,d,h){var f=a[0].spatialReference;a=m.mixin({},this._url.query,{f:"json",sr:n.toJson(f.toJson()),geometries:n.toJson(this._encodeGeometries(a)),
geometry:n.toJson({geometryType:v.getJsonType(b),geometry:b.toJson()})});var k=this._intersectHandler,r=this._errorHandler,q=new e(c._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/intersect",content:a,callbackParamName:"callback",load:function(a,b){k(a,b,f,d,h,q)},error:function(a){r(a,h,q)}});return q},_intersectHandler:function(a,b,c,d,g,e){try{var f=[];k.forEach(a.geometries,function(a){f.push(v.fromJson(a).setSpatialReference(c))});this._successHandler([f],"onIntersectComplete",d,e)}catch(q){this._errorHandler(q,
g,e)}},onIntersectComplete:function(){},difference:function(a,b,d,h){var f=a[0].spatialReference;a=m.mixin({},this._url.query,{f:"json",sr:n.toJson(f.toJson()),geometries:n.toJson(this._encodeGeometries(a)),geometry:n.toJson({geometryType:v.getJsonType(b),geometry:b.toJson()})});var k=this._differenceHandler,r=this._errorHandler,q=new e(c._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/difference",content:a,callbackParamName:"callback",load:function(a,b){k(a,b,f,d,h,q)},error:function(a){r(a,
h,q)}});return q},_differenceHandler:function(a,b,c,d,g,e){try{var f=[];k.forEach(a.geometries,function(a){f.push(v.fromJson(a).setSpatialReference(c))});this._successHandler([f],"onDifferenceComplete",d,e)}catch(q){this._errorHandler(q,g,e)}},onDifferenceComplete:function(){},buffer:function(a,b,d){var f=m.mixin({},this._url.query,{f:"json"},a.toJson()),h=a.outSpatialReference||a.geometries[0].spatialReference,k=this._bufferHandler,r=this._errorHandler,q=new e(c._dfdCanceller);q._pendingDfd=g({url:this._url.path+
"/buffer",content:f,callbackParamName:"callback",load:function(a,c){k(a,c,h,b,d,q)},error:function(a){r(a,d,q)}});return q},_bufferHandler:function(a,b,c,d,g,e){try{var f=a.geometries;a=[];var h,k=f.length;for(h=0;h<k;h++)a[h]=new t({spatialReference:c,rings:f[h].rings});this._successHandler([a],"onBufferComplete",d,e)}catch(z){this._errorHandler(z,g,e)}},onBufferComplete:function(){},areasAndLengths:function(a,b,d){a=m.mixin({},this._url.query,{f:"json"},a.toJson());var f=this._areasAndLengthsHandler,
h=this._errorHandler,k=new e(c._dfdCanceller);k._pendingDfd=g({url:this._url.path+"/areasAndLengths",content:a,callbackParamName:"callback",load:function(a,c){f(a,c,b,d,k)},error:function(a){h(a,d,k)}});return k},_areasAndLengthsHandler:function(a,b,c,d,g){try{this._successHandler([a],"onAreasAndLengthsComplete",c,g)}catch(w){this._errorHandler(w,d,g)}},onAreasAndLengthsComplete:function(){},lengths:function(a,b,d){a=m.mixin({},this._url.query,{f:"json"},a.toJson());var f=this._lengthsHandler,h=this._errorHandler,
k=new e(c._dfdCanceller);k._pendingDfd=g({url:this._url.path+"/lengths",content:a,callbackParamName:"callback",load:function(a,c){f(a,c,b,d,k)},error:function(a){h(a,d,k)}});return k},_lengthsHandler:function(a,b,c,d,g){try{this._successHandler([a],"onLengthsComplete",c,g)}catch(w){this._errorHandler(w,d,g)}},onLengthsComplete:function(){},labelPoints:function(a,b,d){var f=k.map(a,function(a){return a.toJson()}),h=a[0].spatialReference,f=m.mixin({},this._url.query,{f:"json",sr:h.wkid?h.wkid:n.toJson(h.toJson()),
polygons:n.toJson(f)}),l=this._labelPointsHandler,r=this._errorHandler,q=new e(c._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/labelPoints",content:f,callbackParamName:"callback",load:function(c,f){l(c,f,a,h,b,d,q)},error:function(a){r(a,d,q)}});return q},_labelPointsHandler:function(a,b,c,d,g,e,h){try{var f=[];k.forEach(a.labelPoints,function(a){f.push(v.fromJson(a).setSpatialReference(d))});this._successHandler([f],"onLabelPointsComplete",g,h)}catch(D){this._errorHandler(D,e,h)}},onLabelPointsComplete:function(){},
relation:function(a,b,d){a=m.mixin({},this._url.query,{f:"json"},a.toJson());var f=this._relationHandler,h=this._errorHandler,k=new e(c._dfdCanceller);k._pendingDfd=g({url:this._url.path+"/relation",content:a,callbackParamName:"callback",load:function(a,c){f(a,c,b,d,k)},error:function(a){h(a,d,k)}});return k},_relationHandler:function(a,b,c,d,g){try{this._successHandler([a.relations],"onRelationComplete",c,g)}catch(w){this._errorHandler(w,d,g)}},onRelationComplete:function(){},trimExtend:function(a,
b,d){var f=m.mixin({},this._url.query,{f:"json"},a.toJson()),h=a.sr,k=this._trimExtendHandler,l=this._errorHandler,q=new e(c._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/trimExtend",content:f,callbackParamName:"callback",load:function(a,c){k(a,c,h,b,d,q)},error:function(a){l(a,d,q)}});return q},_trimExtendHandler:function(a,b,c,d,g,e){try{var f=a.geometries;a=[];var h,k=f.length;for(h=0;h<k;h++)a[h]=new B({spatialReference:c,paths:f[h].paths});this._successHandler([a],"onTrimExtendComplete",
d,e)}catch(z){this._errorHandler(z,g,e)}},onTrimExtendComplete:function(){},densify:function(a,b,d){var f=m.mixin({},this._url.query,{f:"json"},a.toJson()),h=a.geometries[0].spatialReference,k=this._densifyHandler,l=this._errorHandler,q=new e(c._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/densify",content:f,callbackParamName:"callback",load:function(a,c){k(a,c,h,b,d,q)},error:function(a){l(a,d,q)}});return q},_densifyHandler:function(a,b,c,d,g,e){try{var f=[];k.forEach(a.geometries,function(a){f.push(v.fromJson(a).setSpatialReference(c))});
this._successHandler([f],"onDensifyComplete",d,e)}catch(q){this._errorHandler(q,g,e)}},onDensifyComplete:function(){},generalize:function(a,b,d){var f=m.mixin({},this._url.query,{f:"json"},a.toJson()),h=a.geometries[0].spatialReference,k=this._generalizeHandler,l=this._errorHandler,q=new e(c._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/generalize",content:f,callbackParamName:"callback",load:function(a,c){k(a,c,h,b,d,q)},error:function(a){l(a,d,q)}});return q},_generalizeHandler:function(a,
b,c,d,g,e){try{var f=[];k.forEach(a.geometries,function(a){f.push(v.fromJson(a).setSpatialReference(c))});this._successHandler([f],"onGeneralizeComplete",d,e)}catch(q){this._errorHandler(q,g,e)}},onGeneralizeComplete:function(){},offset:function(a,b,d){var f=m.mixin({},this._url.query,{f:"json"},a.toJson()),h=a.geometries[0].spatialReference,k=this._offsetHandler,l=this._errorHandler,q=new e(c._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/offset",content:f,callbackParamName:"callback",load:function(a,
c){k(a,c,h,b,d,q)},error:function(a){l(a,d,q)}});return q},_offsetHandler:function(a,b,c,d,g,e){try{var f=[];k.forEach(a.geometries,function(a){f.push(v.fromJson(a).setSpatialReference(c))});this._successHandler([f],"onOffsetComplete",d,e)}catch(q){this._errorHandler(q,g,e)}},onOffsetComplete:function(){},distance:function(a,b,d){var f=m.mixin({},this._url.query,{f:"json"},a.toJson()),h=a.geometry1.spatialReference,k=this._distanceHandler,l=this._errorHandler,q=new e(c._dfdCanceller);q._pendingDfd=
g({url:this._url.path+"/distance",content:f,callbackParamName:"callback",load:function(a,c){k(a,c,h,b,d,q)},error:function(a){l(a,d,q)}});return q},_distanceHandler:function(a,b,c,d,g,e){try{a=a&&a.distance,this._successHandler([a],"onDistanceComplete",d,e)}catch(u){this._errorHandler(u,g,e)}},onDistanceComplete:function(){},toGeoCoordinateString:function(a,b,d){var f={};m.isObject(a.sr)?f.sr=a.sr.wkid||n.toJson(a.sr.toJson()):f.sr=a.sr;f.coordinates=n.toJson(a.coordinates);f.conversionType=a.conversionType||
"MGRS";f.conversionMode=a.conversionMode;f.numOfDigits=a.numOfDigits;f.rounding=a.rounding;f.addSpaces=a.addSpaces;a=m.mixin({},this._url.query,{f:"json"},f);var h=this._toGeoCoordinateHandler,k=this._errorHandler,l=new e(c._dfdCanceller);l._pendingDfd=g({url:this._url.path+"/toGeoCoordinateString",content:a,callbackParamName:"callback",load:function(a,c){h(a,c,b,d,l)},error:function(a){k(a,d,l)}});return l},_toGeoCoordinateHandler:function(a,b,c,d,g){try{this._successHandler([a.strings],"onToGeoCoordinateStringComplete",
c,g)}catch(w){this._errorHandler(w,d,g)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(a,b,d){var f={};m.isObject(a.sr)?f.sr=a.sr.wkid||n.toJson(a.sr.toJson()):f.sr=a.sr;f.strings=n.toJson(a.strings);f.conversionType=a.conversionType||"MGRS";f.conversionMode=a.conversionMode;a=m.mixin({},this._url.query,{f:"json"},f);var h=this._fromGeoCoordinateHandler,k=this._errorHandler,l=new e(c._dfdCanceller);l._pendingDfd=g({url:this._url.path+"/fromGeoCoordinateString",content:a,
callbackParamName:"callback",load:function(a,c){h(a,c,b,d,l)},error:function(a){k(a,d,l)}});return l},_fromGeoCoordinateHandler:function(a,b,c,d,g){try{this._successHandler([a.coordinates],"onToGeoCoordinateStringComplete",c,g)}catch(w){this._errorHandler(w,d,g)}},onFromGeoCoordinateStringComplete:function(){}});m.mixin(p,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});h("extend-esri")&&m.setObject("tasks.GeometryService",p,l);return p})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(p,m,k,n,e,h,l,g){p=p(g,{declaredClass:"esri.tasks._Task",
_eventMap:{error:["error"],complete:["result"]},constructor:function(c,d){c&&m.isString(c)&&(this._url=l.urlToObject(this.url=c));d&&d.requestOptions&&(this.requestOptions=d.requestOptions);this.normalization=!0;this._errorHandler=m.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var c=this._url,d=/^http:/i;this.url&&(this.url=this.url.replace(d,"https:"));c&&c.path&&(c.path=c.path.replace(d,"https:"))},_encode:function(c,d,b){var g,e,h={},l,a;for(l in c)if("declaredClass"!==
l&&(g=c[l],e=typeof g,null!==g&&void 0!==g&&"function"!==e))if(m.isArray(g))for(h[l]=[],a=g.length,e=0;e<a;e++)h[l][e]=this._encode(g[e]);else"object"===e?g.toJson&&(e=g.toJson(b&&b[l]),"esri.tasks.FeatureSet"===g.declaredClass&&e.spatialReference&&(e.sr=e.spatialReference,delete e.spatialReference),h[l]=d?e:k.toJson(e)):h[l]=g;return h},_successHandler:function(c,d,b,g){d&&this[d].apply(this,c);b&&b.apply(null,c);g&&h._resDfd(g,c)},_errorHandler:function(c,d,b){this.onError(c);d&&d(c);b&&b.errback(c)},
setNormalization:function(c){this.normalization=c},onError:function(){}});n("extend-esri")&&(e.Task=p);return p})},"esri/numberUtils":function(){define(["dojo/has","dojo/number","dojo/i18n!dojo/cldr/nls/number","./kernel"],function(p,m,k,n){var e=function(e,g){return e-g},h={_reNumber:/^-?(\d+)(\.(\d+))?$/i,getDigits:function(e){var g=String(e),c=g.match(h._reNumber);e={integer:0,fractional:0};c&&c[1]?(e.integer=c[1].split("").length,e.fractional=c[3]?c[3].split("").length:0):-1<g.toLowerCase().indexOf("e")&&
(c=g.split("e"),g=c[0],c=c[1],g&&c&&(g=Number(g),c=Number(c),(e=0<c)||(c=Math.abs(c)),g=h.getDigits(g),e?(g.integer+=c,g.fractional=c>g.fractional?0:g.fractional-c):(g.fractional+=c,g.integer=c>g.integer?1:g.integer-c),e=g));return e},getFixedNumbers:function(e,g){var c,d;c=Number(e.toFixed(g));c<e?d=c+1/Math.pow(10,g):(d=c,c-=1/Math.pow(10,g));c=Number(c.toFixed(g));d=Number(d.toFixed(g));return[c,d]},getPctChange:function(e,g,c,d){var b={prev:null,next:null},h;null!=c&&(h=e-c,b.prev=Math.floor(Math.abs(100*
(g-c-h)/h)));null!=d&&(h=d-e,b.next=Math.floor(Math.abs(100*(d-g-h)/h)));return b},round:function(k,g){var c=k.slice(0),d,b,l,n,m,p,a,f,r,A=g&&null!=g.tolerance?g.tolerance:2,y=g&&g.indexes,w=g&&null!=g.strictBounds?g.strictBounds:!1;if(y)y.sort(e);else for(y=[],p=0;p<c.length;p++)y.push(p);for(p=0;p<y.length;p++)if(r=y[p],d=c[r],b=0===r?null:c[r-1],l=r===c.length-1?null:c[r+1],n=h.getDigits(d),n=n.fractional){a=0;for(f=!1;a<=n&&!f;)m=h.getFixedNumbers(d,a),m=w&&0===p?m[1]:m[0],f=h.hasMinimalChange(d,
m,b,l,A),a++;f&&(c[r]=m)}return c},hasMinimalChange:function(e,g,c,d,b){e=h.getPctChange(e,g,c,d);g=null==e.prev||e.prev<=b;c=null==e.next||e.next<=b;return g&&c||e.prev+e.next<=2*b},_reAllZeros:new RegExp("\\"+k.decimal+"0+$","g"),_reSomeZeros:RegExp("(\\d)0*$","g"),format:function(e,g){g=g||{places:20,round:-1};var c=m.format(e,g);c&&(c=c.replace(h._reSomeZeros,"$1").replace(h._reAllZeros,""));return c}};p("extend-esri")&&(n.numberUtils=h);return h})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array",
"dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(p,m,k,n,e){return k("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var h=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);e.parse(h,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,
contextRequire:this.contextRequire,scope:"dojo"}).then(n.hitch(this,function(e){this._startupWidgets=e;for(var g=0;g<e.length;g++)this._processTemplateNode(e[g],function(c,d){return c[d]},function(c,d,b){return d in c?c.connect(c,d,b):c.on(d,b,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(e,k,g){return k(e,"dojoType")||k(e,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){p.forEach(this._startupWidgets,function(e){e&&!e._started&&e.startup&&e.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(p,
m,k,n,e,h,l,g,c,d,b,B,t,x,v,a){function f(a){return eval("("+a+")")}function r(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<y){var b=a._nameCaseMap={},f;for(f in c)"_"!==f.charAt(0)&&(b[f.toLowerCase()]=f);b._extendCnt=y}return b}function A(a,b){b||(b=p);var c=b._dojoParserCtorMap||(b._dojoParserCtorMap={}),f=a.join();if(!c[f]){for(var d=[],e=0,g=a.length;e<g;e++){var h=a[e];d[d.length]=c[h]=c[h]||k.getObject(h)||~h.indexOf("/")&&b(h)}e=d.shift();c[f]=d.length?e.createSubclass?e.createSubclass(d):
e.extend.apply(e,d):e}return c[f]}new Date("X");var y=0;c.after(k,"extend",function(){y++},!0);var w={_clearCache:function(){y++;_ctorMap={}},_functionFromScript:function(a,b){var c="",f="",d=a.getAttribute(b+"args")||a.getAttribute("args"),e=a.getAttribute("with"),d=(d||"").split(/\s*,\s*/);e&&e.length&&n.forEach(e.split(/\s*,\s*/),function(a){c+="with("+a+"){";f+="}"});return new Function(d,c+a.innerHTML+f)},instantiate:function(a,b,c){b=b||{};c=c||{};var f=(c.scope||m._scopeName)+"Type",d="data-"+
(c.scope||m._scopeName)+"-",e=d+"type",g=d+"mixins",h=[];n.forEach(a,function(a){var c=f in b?b[f]:a.getAttribute(e)||a.getAttribute(f);if(c){var d=a.getAttribute(g),c=d?[c].concat(d.split(/\s*,\s*/)):[c];h.push({node:a,types:c})}});return this._instantiate(h,b,c)},_instantiate:function(a,b,c,f){function e(a){b._started||c.noStart||n.forEach(a,function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}a=n.map(a,function(a){var f=a.ctor||A(a.types,c.contextRequire);if(!f)throw Error("Unable to resolve constructor for: '"+
a.types.join()+"'");return this.construct(f,a.node,b,c,a.scripts,a.inherited)},this);return f?d(a).then(e):e(a)},construct:function(a,d,e,h,l,p){function q(a){D&&k.setObject(D,a);for(u=0;u<I.length;u++)c[I[u].advice||"after"](a,I[u].method,k.hitch(a,I[u].func),!0);for(u=0;u<G.length;u++)G[u].call(a);for(u=0;u<M.length;u++)a.watch(M[u].prop,M[u].func);for(u=0;u<R.length;u++)v(a,R[u].event,R[u].func);return a}var B=a&&a.prototype;h=h||{};var A={};h.defaults&&k.mixin(A,h.defaults);p&&k.mixin(A,p);var y;
t("dom-attributes-explicit")?y=d.attributes:t("dom-attributes-specified-flag")?y=n.filter(d.attributes,function(a){return a.specified}):(p=(/^input$|^img$/i.test(d.nodeName)?d:d.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),y=n.map(p.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==d.nodeName&&"value"==a||"enctype"==b?d.getAttribute(b):d.getAttributeNode(b).value}}));var w=h.scope||m._scopeName;
p="data-"+w+"-";var C={};"dojo"!==w&&(C[p+"props"]="data-dojo-props",C[p+"type"]="data-dojo-type",C[p+"mixins"]="data-dojo-mixins",C[w+"type"]="dojotype",C[p+"id"]="data-dojo-id");for(var u=0,z,w=[],D,H;z=y[u++];){var E=z.name,F=E.toLowerCase();z=z.value;switch(C[F]||F){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":H=z;break;case "data-dojo-id":case "jsid":D=z;break;case "data-dojo-attach-point":case "dojoattachpoint":A.dojoAttachPoint=z;break;case "data-dojo-attach-event":case "dojoattachevent":A.dojoAttachEvent=
z;break;case "class":A["class"]=d.className;break;case "style":A.style=d.style&&d.style.cssText;break;default:if(E in B||(E=r(a)[F]||E),E in B)switch(typeof B[E]){case "string":A[E]=z;break;case "number":A[E]=z.length?Number(z):NaN;break;case "boolean":A[E]="false"!=z.toLowerCase();break;case "function":""===z||-1!=z.search(/[^\w\.]+/i)?A[E]=new Function(z):A[E]=k.getObject(z,!1)||new Function(z);w.push(E);break;default:F=B[E],A[E]=F&&"length"in F?z?z.split(/\s*,\s*/):[]:F instanceof Date?""==z?new Date(""):
"now"==z?new Date:b.fromISOString(z):F instanceof g?m.baseUrl+z:f(z)}else A[E]=z}}for(y=0;y<w.length;y++)C=w[y].toLowerCase(),d.removeAttribute(C),d[C]=null;if(H)try{H=f.call(h.propsThis,"{"+H+"}"),k.mixin(A,H)}catch(S){throw Error(S.toString()+" in data-dojo-props\x3d'"+H+"'");}k.mixin(A,e);l||(l=a&&(a._noScript||B._noScript)?[]:x("\x3e script[type^\x3d'dojo/']",d));var I=[],G=[],M=[],R=[];if(l)for(u=0;u<l.length;u++)C=l[u],d.removeChild(C),e=C.getAttribute(p+"event")||C.getAttribute("event"),h=
C.getAttribute(p+"prop"),H=C.getAttribute(p+"method"),w=C.getAttribute(p+"advice"),y=C.getAttribute("type"),C=this._functionFromScript(C,p),e?"dojo/connect"==y?I.push({method:e,func:C}):"dojo/on"==y?R.push({event:e,func:C}):A[e]=C:"dojo/aspect"==y?I.push({method:H,advice:w,func:C}):"dojo/watch"==y?M.push({prop:h,func:C}):G.push(C);a=(l=a.markupFactory||B.markupFactory)?l(A,d,a):new a(A,d);return a.then?a.then(q):q(a)},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,f=
c(a.parent),b={dir:b.getAttribute("dir")||f.dir,lang:b.getAttribute("lang")||f.lang,textDir:b.getAttribute(l)||f.textDir},d;for(d in b)b[d]&&(a.inherited[d]=b[d])}return a.inherited}var f=[],d=[],e={},g=(b.scope||m._scopeName)+"Type",h="data-"+(b.scope||m._scopeName)+"-",k=h+"type",l=h+"textdir",h=h+"mixins",q=a.firstChild,r=b.inherited;if(!r){var y=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&y(a.parentNode,b)},r={dir:y(a,"dir"),lang:y(a,"lang"),textDir:y(a,l)},x;for(x in r)r[x]||
delete r[x]}for(var r={inherited:r},w,u;;)if(q)if(1!=q.nodeType)q=q.nextSibling;else if(w&&"script"==q.nodeName.toLowerCase())(v=q.getAttribute("type"))&&/^dojo\/\w/i.test(v)&&w.push(q),q=q.nextSibling;else if(u)q=q.nextSibling;else{var v=q.getAttribute(k)||q.getAttribute(g);x=q.firstChild;if(v||x&&(3!=x.nodeType||x.nextSibling)){u=null;if(v){var N=q.getAttribute(h);w=N?[v].concat(N.split(/\s*,\s*/)):[v];try{u=A(w,b.contextRequire)}catch(G){}u||n.forEach(w,function(a){~a.indexOf("/")&&!e[a]&&(e[a]=
!0,d[d.length]=a)});N=u&&!u.prototype._noScript?[]:null;r={types:w,ctor:u,parent:r,node:q,scripts:N};r.inherited=c(r);f.push(r)}else r={node:q,scripts:w,parent:r};w=N;u=q.stopParser||u&&u.prototype.stopParser&&!b.template;q=x}else q=q.nextSibling}else{if(!r||!r.node)break;q=r.node.nextSibling;u=!1;r=r.parent;w=r.scripts}var Q=new B;d.length?(t("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+d.join(", ")),(b.contextRequire||p)(d,function(){Q.resolve(n.filter(f,function(a){if(!a.ctor)try{a.ctor=
A(a.types,b.contextRequire)}catch(S){}for(var c=a.parent;c&&!c.types;)c=c.parent;var f=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(f&&f.stopParser&&!b.template);a.instantiate=!c||c.instantiate&&c.instantiateChildren;return a.instantiate}))})):Q.resolve(f);return Q.promise},_require:function(a,b){var c=f("{"+a.innerHTML+"}"),d=[],e=[],g=new B,h=b&&b.contextRequire||p,l;for(l in c)d.push(l),e.push(c[l]);h(e,function(){for(var a=0;a<d.length;a++)k.setObject(d[a],arguments[a]);g.resolve(arguments)});
return g.promise},_scanAmd:function(a,b){var c=new B,f=c.promise;c.resolve(!0);var d=this;x("script[type\x3d'dojo/require']",a).forEach(function(a){f=f.then(function(){return d._require(a,b)});a.parentNode.removeChild(a)});return f},parse:function(a,b){!a||"string"==typeof a||"nodeType"in a||(b=a,a=b.rootNode);var c=a?h.byId(a):l.body();b=b||{};var f=b.template?{template:!0}:{},d=[],e=this,g=this._scanAmd(c,b).then(function(){return e.scan(c,b)}).then(function(a){return e._instantiate(a,f,b,!0)}).then(function(a){return d=
d.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});k.mixin(d,g);return d}};m.parser=w;e.parseOnLoad&&a(100,w,"parse");return w})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(p,m){var k={};p.setObject("dojo.date.stamp",k);k.fromISOString=function(n,e){k._isoRegExp||(k._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var h=k._isoRegExp.exec(n),l=null;
if(h){h.shift();h[1]&&h[1]--;h[6]&&(h[6]*=1E3);e&&(e=new Date(e),m.forEach(m.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(c){return e["get"+c]()}),function(c,b){h[b]=h[b]||c}));l=new Date(h[0]||1970,h[1]||0,h[2]||1,h[3]||0,h[4]||0,h[5]||0,h[6]||0);100>h[0]&&l.setFullYear(h[0]||1970);var g=0,c=h[7]&&h[7].charAt(0);"Z"!=c&&(g=60*(h[8]||0)+(Number(h[9])||0),"-"!=c&&(g*=-1));c&&(g-=l.getTimezoneOffset());g&&l.setTime(l.getTime()+6E4*g)}return l};k.toISOString=function(k,
e){var h=function(b){return 10>b?"0"+b:b};e=e||{};var l=[],g=e.zulu?"getUTC":"get",c="";"time"!=e.selector&&(c=k[g+"FullYear"](),c=["0000".substr((c+"").length)+c,h(k[g+"Month"]()+1),h(k[g+"Date"]())].join("-"));l.push(c);if("date"!=e.selector){c=[h(k[g+"Hours"]()),h(k[g+"Minutes"]()),h(k[g+"Seconds"]())].join(":");g=k[g+"Milliseconds"]();e.milliseconds&&(c+="."+(100>g?"0":"")+h(g));if(e.zulu)c+="Z";else if("time"!=e.selector)var g=k.getTimezoneOffset(),d=Math.abs(g),c=c+((0<g?"-":"+")+h(Math.floor(d/
60))+":"+h(d%60));l.push(c)}return l.join("T")};return k})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),function(p,m,k,n,e,h){return p([h,e],{_onMap:function(e){var g=this.constructor._onMap,c;g&&g.FINAL||(delete this.constructor._onMap,g=this.registerConnectEvents(),g.FINAL=!0);e=e.toLowerCase();g[e]?c=this[g[e].method]:(e=this._onCamelCase(e),this[e]&&(c=e));return c},on:function(e,g){var c=this._onMap(e),
d=e.replace(/\-/g,""),b="on"+d in this.domNode;return c||!b?this.inherited(arguments):this.own(n(this.domNode,d,g))[0]},emit:function(e,g,c){var d,b,h,k=e.toLowerCase(),l=this.constructor._onMap||this.registerConnectEvents();b=this[this._onMap(k)];g=g||{};g.target||(g.target=this);b&&l&&l[k]&&(this._onObj2Arr(function(){d=Array.prototype.slice.call(arguments)},l[k].argKeys)(g),h=m.mixin({},arguments),h[2]=d,h[0]=l[k].name.replace(/^on/,""));return this.inherited(h||arguments)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare",
"dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(p,m,k,n){return p("dijit.form.ToggleButton",[k,n],{baseClass:"dijitToggleButton",setChecked:function(e){m.deprecated("setChecked("+e+") is deprecated. Use set('checked',"+e+") instead.","","2.0");this.set("checked",e)}})})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),
function(p,m,k,n,e,h,l,g,c,d){n("dijit-legacy-requires")&&l(0,function(){p(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});l=m("dijit.form.Button"+(n("dojo-bidi")?"_NoBidi":""),[g,c],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:d,_setValueAttr:"valueNode",_setNameAttr:function(b){this.valueNode&&this.valueNode.setAttribute("name",b)},postCreate:function(){this.inherited(arguments);
this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=h.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(b){this.containerNode&&k.toggle(this.containerNode,"dijitDisplayNone",!b);this._set("showLabel",b)},setLabel:function(b){e.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",b)},onLabelSet:function(){this.inherited(arguments);this.showLabel||
"title"in this.params||(this.titleNode.title=h.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});n("dojo-bidi")&&(l=m("dijit.form.Button",l,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(b){this._created&&this.textDir!=b&&(this._set("textDir",b),this._setLabelAttr(this.label))}}));return l})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),
function(p,m,k,n,e,h,l,g){m("dijit-legacy-requires")&&n(0,function(){require(["dijit/form/_FormValueWidget"])});return p("dijit.form._FormWidget",[e,l,h,g],{setDisabled:function(c){k.deprecated("setDisabled("+c+") is deprecated. Use set('disabled',"+c+") instead.","","2.0");this.set("disabled",c)},setValue:function(c){k.deprecated("dijit.form._FormWidget:setValue("+c+") is deprecated.  Use set('value',"+c+") instead.","","2.0");this.set("value",c)},getValue:function(){k.deprecated(this.declaredClass+
"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!m("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(p,m,k,n,e,h,l,g,c,d){return m("dijit.form._FormWidgetMixin",
null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){this._set("disabled",b);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?k.set(this.focusNode,"disabled",b):this.focusNode.setAttribute("aria-disabled",b?"true":"false");this.valueNode&&k.set(this.valueNode,"disabled",b);b?(this._set("hovering",!1),
this._set("active",!1),b="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",p.forEach(e.isArray(b)?b:[b],function(b){b=this[b];g("webkit")||d.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(b){if("mouse"==b&&this.isFocusable())var d=this.own(l(this.focusNode,"focus",function(){k.remove();d.remove()}))[0],h=g("pointer-events")?
"pointerup":g("MSPointer")?"MSPointerUp":g("touch-events")?"touchend, mouseup":"mouseup",k=this.own(l(this.ownerDocumentBody,h,e.hitch(this,function(b){k.remove();d.remove();this.focused&&("touchend"==b.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){c.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=n.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(b){}},
compare:function(b,c){return"number"==typeof b&&"number"==typeof c?isNaN(b)&&isNaN(c)?0:b-c:b>c?1:b<c?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(b,c){void 0!=this._lastValueReported||null!==c&&this._onChangeActive||(this._resetValue=this._lastValueReported=b);this._pendingOnChange=this._pendingOnChange||typeof b!=typeof this._lastValueReported||0!=this.compare(b,this._lastValueReported);(this.intermediateChanges||c||void 0===c)&&this._pendingOnChange&&(this._lastValueReported=
b,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(b)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],
function(p,m,k,n){var e=p("dijit.form._ButtonMixin"+(k("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(e){e.stopPropagation();e.preventDefault();this.disabled||this.valueNode.click(e);return!1},_onClick:function(e){if(this.disabled)return e.stopPropagation(),e.preventDefault(),!1;!1===this.onClick(e)&&e.preventDefault();var h=e.defaultPrevented;if(!h&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var g=this.domNode;g.parentNode;g=g.parentNode){var c=n.byNode(g);
if(c&&"function"==typeof c._onSubmit){c._onSubmit(e);e.preventDefault();h=!0;break}}return!h},postCreate:function(){this.inherited(arguments);m.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(e){this._set("label",e);(this.containerNode||this.focusNode).innerHTML=e;this.onLabelSet()},onLabelSet:function(){}});k("dojo-bidi")&&(e=p("dijit.form._ButtonMixin",e,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));
return e})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(p,m){return p("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(k){var m=this.checked;this._set("checked",!m);var e=this.inherited(arguments);this.set("checked",e?this.checked:m);return e},_setCheckedAttr:function(k,n){this._set("checked",k);var e=this.focusNode||this.domNode;this._created&&m.get(e,"checked")!=!!k&&m.set(e,"checked",!!k);e.setAttribute(this._aria_attr,
String(k));this._handleOnChange(k,n)},postCreate:function(){this.inherited(arguments);var k=this.focusNode||this.domNode;this.checked&&k.setAttribute("checked","checked");void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/DropDownButton":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html ../a11yclick".split(" "),
function(p,m,k,n,e,h,l,g,c,d){return p("dijit.form.DropDownButton",[l,g,c],{baseClass:"dijitDropDownButton",templateString:d,_fillContent:function(){var b=this.srcNodeRef,c=this.containerNode;if(b&&c)for(;b.hasChildNodes();){var d=b.firstChild;d.hasAttribute&&(d.hasAttribute("data-dojo-type")||d.hasAttribute("dojoType")||d.hasAttribute("data-"+m._scopeName+"-type")||d.hasAttribute(m._scopeName+"Type"))?(this.dropDownContainer=this.ownerDocument.createElement("div"),this.dropDownContainer.appendChild(d)):
c.appendChild(d)}},startup:function(){this._started||(!this.dropDown&&this.dropDownContainer&&(this.dropDown=e.byNode(this.dropDownContainer.firstChild),delete this.dropDownContainer),this.dropDown&&h.hide(this.dropDown),this.inherited(arguments))},isLoaded:function(){var b=this.dropDown;return!!b&&(!b.href||b.isLoaded)},loadDropDown:function(b){var c=this.dropDown,d=c.on("load",k.hitch(this,function(){d.remove();b()}));c.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},
"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),function(p,m,k,n,e,h,l,g,c,d,b,B,t,x,v,a){return p("dijit._HasDropDown",a,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,
_onDropDownMouseDown:function(a){this.disabled||this.readOnly||("MSPointerDown"!=a.type&&a.preventDefault(),this.own(b.once(this.ownerDocument,B.release,d.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(a){var b=this.dropDown,c=!1;if(a&&this._opened){var d=h.position(this._buttonNode,!0);if(!(a.pageX>=d.x&&a.pageX<=d.x+d.w&&a.pageY>=d.y&&a.pageY<=d.y+d.h)){for(d=a.target;d&&!c;)e.contains(d,"dijitPopup")?c=!0:d=d.parentNode;if(c){d=a.target;if(b.onItemClick){for(var f;d&&
!(f=t.byNode(d));)d=d.parentNode;if(f&&f.onClick&&f.getParent)f.getParent().onItemClick(f,a)}return}}}this._opened?b.focus&&(!1!==b.autoFocus||"mouseup"==a.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){b.focus();delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||
this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";e.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(b(this._buttonNode,B.press,d.hitch(this,"_onDropDownMouseDown")),
b(this._buttonNode,"click",d.hitch(this,"_onDropDownClick")),b(a,"keydown",d.hitch(this,"_onKey")),b(a,"keyup",d.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,d=a.target;b&&this._opened&&b.handleKey&&!1===b.handleKey(a)?(a.stopPropagation(),a.preventDefault()):b&&this._opened&&
a.keyCode==c.ESCAPE?(this.closeDropDown(),a.stopPropagation(),a.preventDefault()):!this._opened&&(a.keyCode==c.DOWN_ARROW||(a.keyCode==c.ENTER||a.keyCode==c.SPACE&&(!this._searchTimer||a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(d.tagName||"").toLowerCase()||d.type&&"text"!==d.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,a.stopPropagation(),a.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(d.hitch(a,
"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new m,b=d.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?b():this.loadDropDown(b);return a},toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,b=a.domNode,c=this._aroundNode||
this.domNode,g=this,k=v.open({parent:this,popup:a,around:c,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){g.closeDropDown(!0)},onCancel:function(){g.closeDropDown(!0)},onClose:function(){n.set(g._popupStateNode,"popupActive",!1);e.remove(g._popupStateNode,"dijitHasDropDownOpen");g._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&c.offsetWidth>a._popupWrapper.offsetWidth){var c=c.offsetWidth-a._popupWrapper.offsetWidth,l={w:a.domNode.offsetWidth+c};this._origStyle=
b.style.cssText;d.isFunction(a.resize)?a.resize(l):h.setMarginBox(b,l);"R"==k.corner[1]&&(a._popupWrapper.style.left=a._popupWrapper.style.left.replace("px","")-c+"px")}n.set(this._popupStateNode,"popupActive","true");e.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",a.id);"presentation"===b.getAttribute("role")||b.getAttribute("aria-labelledby")||b.setAttribute("aria-labelledby",
this.id);return k},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),a&&this.focus&&this.focus(),v.close(this.dropDown),this._opened=!1);this._origStyle&&(this.dropDown.domNode.style.cssText=this._origStyle,delete this._origStyle)}})})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(p,m,k,n,e,h,l,g,c,d,b,B,t,x,v,a){return c("dijit.layout.ContentPane",[k,n,e],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:p._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,c){var d=new c(a,b);return!d.href&&d._contentSetter&&d._contentSetter.parseDeferred&&!d._contentSetter.parseDeferred.isFulfilled()?d._contentSetter.parseDeferred.then(function(){return d}):d},create:function(a,c){if(!(a&&a.template||!c||"href"in a||"content"in a)){c=b.byId(c);for(var d=c.ownerDocument.createDocumentFragment();c.firstChild;)d.appendChild(c.firstChild);
a=m.delegate(a,{content:d})}this.inherited(arguments,[a,c])},postMixInProperties:function(){this.inherited(arguments);var a=v.getLocalization("dijit","loading",this.lang);this.loadingMessage=h.substitute(this.loadingMessage,a);this.errorMessage=h.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&g.forEach(this._contentSetter.parseResults,
function(a){a._started||a._destroyed||!m.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){g.forEach(this.getChildren(),function(a){a._started||a._destroyed||!m.isFunction(a.startup)||(a.startup(),a._started=!0)});this._contentSetter&&g.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!m.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},setHref:function(a){p.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new d(m.hitch(this,"cancel"));this.onLoadDeferred.then(m.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){p.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href",
"");this.cancel();this.onLoadDeferred=new d(m.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(m.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new d(m.hitch(this,"cancel"));this.onLoadDeferred.then(m.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
m.isObject(this.ioArgs)&&m.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||x.get)(b),d;c.then(function(b){d=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(u){a._onError("Content",u)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return d});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(r){console.error("Error "+this.widgetId+
" running custom onLoad code: "+r.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(f){console.error("Error "+this.widgetId+" running custom onUnload code: "+f.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;g.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(g.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?
b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||t.empty(this.containerNode);delete this._singleChild},_setContent:function(b,c){b=this.preprocessContent(b);this.destroyDescendants();var d=this._contentSetter;d&&d instanceof l._ContentSetter||(d=this._contentSetter=new l._ContentSetter({node:this.containerNode,_onError:m.hitch(this,this._onError),onContentError:m.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(q){console.error("Fatal "+
this.id+" could not change content due to "+q.message,q)}})}));var e=m.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!b.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),e=d.set(m.isObject(b)&&b.domNode?b.domNode:b,e),f=this;return a(e&&e.then?e:d.parseDeferred,function(){delete f._contentSetterParams;c||(f._started&&(f._startChildren(),f._scheduleLayout()),f._onLoadHandler(b))})},
preprocessContent:function(a){return a},_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(p,m,k,n,e,h,l,g,c,d){return m("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var b=this.getParent();this._childOfLayoutWidget=b&&b.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(c.on("resize",h.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var b=[],c=!1;l("\x3e *",this.containerNode).some(function(d){var e=
g.byNode(d);e&&e.resize?b.push(e):!/script|link|style/i.test(d.nodeName)&&d.offsetHeight&&(c=!0)});this._singleChild=1!=b.length||c?null:b[0];k.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(b,c){this._resizeCalled=!0;this._scheduleLayout(b,c)},_scheduleLayout:function(b,c){this._isShown()?this._layout(b,c):(this._needLayout=!0,this._changeSize=b,this._resultSize=c)},_layout:function(b,c){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
b&&n.setMarginBox(this.domNode,b);var e=this.containerNode;if(e===this.domNode){var g=c||{};h.mixin(g,b||{});"h"in g&&"w"in g||(g=h.mixin(n.getMarginBox(e),g));this._contentBox=d.marginBox2contentBox(e,g)}else this._contentBox=n.getContentBox(e);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var b=this._contentBox||n.getContentBox(this.containerNode);this._singleChild.resize({w:b.w,h:b.h})}else for(var b=this.getChildren(),
c,d=0;c=b[d++];)c.resize&&c.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var b=this.domNode,c=this.domNode.parentNode;return"none"!=b.style.display&&"hidden"!=b.style.visibility&&!k.contains(b,"dijitHidden")&&c&&c.style&&"none"!=c.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(p,m,k,n,e){function h(c){return c.substring(0,1).toUpperCase()+c.substring(1)}function l(c,d){var b=c.resize?c.resize(d):k.setMarginBox(c.domNode,d);b?e.mixin(c,b):(e.mixin(c,k.getMarginBox(c.domNode)),e.mixin(c,d))}var g={marginBox2contentBox:function(c,d){var b=n.getComputedStyle(c),e=k.getMarginExtents(c,b),g=k.getPadBorderExtents(c,b);return{l:n.toPixelValue(c,b.paddingLeft),t:n.toPixelValue(c,b.paddingTop),w:d.w-
(e.w+g.w),h:d.h-(e.h+g.h)}},layoutChildren:function(c,d,b,g,k){d=e.mixin({},d);m.add(c,"dijitLayoutContainer");b=p.filter(b,function(b){return"center"!=b.region&&"client"!=b.layoutAlign}).concat(p.filter(b,function(b){return"center"==b.region||"client"==b.layoutAlign}));p.forEach(b,function(b){var c=b.domNode,a=b.region||b.layoutAlign;if(!a)throw Error("No region setting for "+b.id);var e=c.style;e.left=d.l+"px";e.top=d.t+"px";e.position="absolute";m.add(c,"dijitAlign"+h(a));c={};g&&g==b.id&&(c["top"==
b.region||"bottom"==b.region?"h":"w"]=k);"leading"==a&&(a=b.isLeftToRight()?"left":"right");"trailing"==a&&(a=b.isLeftToRight()?"right":"left");"top"==a||"bottom"==a?(c.w=d.w,l(b,c),d.h-=b.h,"top"==a?d.t+=b.h:e.top=d.t+d.h+"px"):"left"==a||"right"==a?(c.h=d.h,l(b,c),d.w-=b.w,"left"==a?d.l+=b.w:e.left=d.l+d.w+"px"):"client"!=a&&"center"!=a||l(b,d)})}};e.setObject("dijit.layout.utils",g);return g})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(p,m,k,n,e,h,l){var g=0,c={_secureForInnerHtml:function(c){return c.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:h.empty,_setNodeContent:function(c,b){h.empty(c);if(b)if("number"==typeof b&&(b=b.toString()),"string"==typeof b&&(b=h.toDom(b,c.ownerDocument)),!b.nodeType&&m.isArrayLike(b))for(var d=b.length,e=0;e<b.length;e=d==b.length?e+1:0)h.place(b[e],c,"last");else h.place(b,c,"last");return c},_ContentSetter:n("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:p._scopeName,startup:!0,constructor:function(c,b){m.mixin(this,c||{});b=this.node=e.byId(this.node||b);this.id||(this.id=["Setter",b?b.id||b.tagName:"",g++].join("_"))},set:function(c,b){void 0!==c&&(this.content=c);"number"==typeof c&&(c=c.toString());b&&this._mixin(b);this.onBegin();this.setContent();var d=this.onEnd();return d&&d.then?d:this.node},setContent:function(){var d=this.node;if(!d)throw Error(this.declaredClass+
": setContent given no node");try{d=c._setNodeContent(d,this.content)}catch(B){var b=this.onContentError(B);try{d.innerHTML=b}catch(t){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+t.message,t)}}this.node=d},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(k.forEach(this.parseResults,function(c){c.destroy&&c.destroy()}),delete this.parseResults);
h.empty(this.node)},onBegin:function(){var d=this.content;if(m.isString(d)&&(this.cleanContent&&(d=c._secureForInnerHtml(d)),this.extractContent)){var b=d.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(d=b[1])}this.empty();this.content=d;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(c){return"Error occurred setting content: "+
c},onExecError:function(c){return"Error occurred executing scripts: "+c},_mixin:function(c){var b={},d;for(d in c)d in b||(this[d]=c[d])},_parse:function(){var c=this.node;try{var b={};k.forEach(["dir","lang","textDir"],function(c){this[c]&&(b[c]=this[c])},this);var e=this;this.parseDeferred=l.parse({rootNode:c,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(b){return e.parseResults=b},function(b){e._onError("Content",b,"Error parsing in _ContentSetter#"+this.id)})}catch(t){this._onError("Content",
t,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(d,b,e){d=this["on"+d+"Error"].call(this,b);e?console.error(e,b):d&&c._setNodeContent(this.node,d,!0)}}),set:function(d,b,e){void 0==b&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),b="");"number"==typeof b&&(b=b.toString());return e?(new c._ContentSetter(m.mixin(e,{content:b,node:d}))).set():c._setNodeContent(d,b,!0)}};m.setObject("dojo.html",c);return c})},"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\r\n\t   cellspacing\x3d"0"\x3e\r\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\r\n\x3c/table\x3e\r\n',
"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\r\n\t\trole\x3d"presentation"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\r\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:esri/dijit/templates/Measurement.html":"\x3cdiv class\x3d\"esriMeasurement\"\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' class\x3d'esriMeasurementButtonContainer'\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_areaButton' iconClass\x3d'areaIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_areaButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_distanceButton' iconClass\x3d'distanceIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_distanceButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_locationButton' iconClass\x3d'locationIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_locationButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d\"esriMeasurementSeparator\"\x3e|\x3c/div\x3e\r\n    \x3cbutton dojoType\x3d'dijit.form.DropDownButton' baseClass\x3d'esriToggleButton' dojoAttachPoint\x3d'_unitDropDown' label\x3d'unit' value\x3d'unit' style\x3d'visibility:hidden;'\x3e\x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultLabel' class\x3d'resultLabel esriMeasurementResultLabel'\x3e\x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultValueContainer' align\x3d'leading' class\x3d\"esriMeasurementResultValue\"\x3e\r\n    \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultValue' class\x3d'result'\x3e\x26nbsp;\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultTable' align\x3d'leading' class\x3d\"resultTable esriMeasurementTableContainer\" style\x3d\"display:none;\"\x3e\r\n    \x3ctable class\x3d\"esriMeasurementResultTable\"\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableHeader\" colspan\x3d\"2\"\x3e${_NLS_Lat}\x3c/td\x3e\x3ctd class\x3d\"esriMeasurementTableHeader\"\x3e${_NLS_Lon}\x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d\"esriMeasurementTableRow\" dojoAttachPoint\x3d\"_mouseRow\"\x3e\r\n        \x3ctd dojoAttachPoint\x3d\"mouseCell\"\x3e\x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"mouseLatitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"mouseLongitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d\"esriMeasurementTableRow\"\x3e\r\n        \x3ctd dojoAttachPoint\x3d\"pinCell\"\x3e\x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"markerLatitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"markerLongitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e",
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/DropDownButton.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick" data-dojo-attach-point\x3d"valueNode" aria-hidden\x3d"true"\r\n/\x3e\x3c/span\x3e\r\n',
"*now":function(p){p(['dojo/i18n!*preload*esri/dijit/nls/Measurement*["ar","az","ca","cs","da","de-de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ro","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});
define("esri/dijit/Measurement","require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/debounce dojo/sniff dojo/dom-style dojo/dom-construct dojox/gfx dijit/_Widget dijit/registry dijit/Menu dijit/MenuItem ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../geometry/geodesicUtils ../geometry/webMercatorUtils ../geometry/Point ../geometry/Polyline ../geometry/Polygon ../graphic ../tasks/AreasAndLengthsParameters ../tasks/LengthsParameters ../tasks/GeometryService ../kernel ../config ../domUtils ../numberUtils ../lang ../units ../WKIDUnitConversion ../SpatialReference dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ./_EventedWidget dojo/text!./templates/Measurement.html dojo/i18n!../nls/jsapi dijit/form/ToggleButton dijit/form/DropDownButton dijit/layout/ContentPane".split(" "),function(p,
m,k,n,e,h,l,g,c,d,b,B,t,x,v,a,f,r,A,y,w,u,q,D,z,F,I,J,P,U,K,L,C,O,V,T,H,E,N,Q,G){m=m([N,B,H,E],{declaredClass:"esri.dijit.Measurement",widgetsInTemplate:!0,templateString:Q,_map:null,_geometryService:null,_interpolatedMap:null,_mouseImgURL:null,_defaultPinURL:null,_measureGraphics:[],_measureGraphic:null,_locationGraphic:null,_tempGraphic:null,_polylineGraphics:null,_polygonGraphic:null,_pointSymbol:null,_useDefaultPointSymbol:!0,_defaultLineSymbol:null,_lineSymbol:null,_areaLineSymbol:null,_defaultFillSymbol:null,
_fillSymbol:null,_borderlessFillSymbol:null,_defaultCustomPointSymbolHeight:25,_defaultCustomPointSymbolWidth:25,_userGeometry:null,_currentGeometry:null,_inputPoints:[],_unitDictionary:[],_densificationRatio:.07848050723825097,numberPattern:"#,###,###,##0.0",result:null,_defaultDistanceUnit:null,_defaultAreaUnit:null,_defaultLocationUnit:null,currentDistanceUnit:null,currentAreaUnit:null,currentLocationUnit:null,_unitStrings:{},_locationUnitStrings:[],_locationUnitStringsLong:[],_distanceUnitStrings:[],
_distanceUnitStringsLong:[],_areaUnitStrings:[],_areaUnitStringsLong:[],_calculatingMsg:null,_gsErrorMsg:null,_NLS_Lat:null,_NLS_Lon:null,_mouseMoveMapHandler:null,_mouseClickMapHandler:null,_doubleClickMapHandler:null,_mouseDragMapHandler:null,_clickMapHandler:null,_mapExtentChangeHandler:null,_geometryAreaHandler:null,_snappingCallback:null,_calcTimer:null,_buttonDijits:{},previousTool:null,activeTool:null,markerLongitude:null,markerLatitude:null,mouseLongitude:null,mouseLatitude:null,_eventMap:{"measure-start":["toolName",
"unitName"],measure:["toolName","geometry","values","unitName","segmentLength"],"measure-end":["toolName","geometry","values","unitName"],"tool-change":["toolName","unitName","previousToolName"],"unit-change":["unitName","toolName"]},constructor:function(b,c){if(b&&b.map){this._map=b.map;if(this._map.loaded)this._map.cs=this._checkCS(this._map.spatialReference),this._interpolatedMap=!("Web Mercator"===this._map.cs||"PCS"===this._map.cs);else var d=e.connect(this._map,"onLoad",this,function(){e.disconnect(d);
d=null;this._map.cs=this._checkCS(this._map.spatialReference);this._interpolatedMap=!("Web Mercator"===this._map.cs||"PCS"===this._map.cs)});this._geometryService=U.defaults.geometryService;this._mouseImgURL=p.toUrl("./images/cursor16x24.png");this._defaultPinURL=p.toUrl("./images/esriGreenPin16x26.png");this._defaultLineSymbol=new f(f.STYLE_SOLID,new h([0,128,255]),3);this._defaultFillSymbol=new r(f.STYLE_SOLID,this._defaultLineSymbol,new h([0,0,0,.5]));b.pointSymbol?(this._pointSymbol=b.pointSymbol,
this._useDefaultPointSymbol=!1):(this._pointSymbol=new a(this._defaultPinURL,16,26),this._pointSymbol.setOffset(0,12));var g=b.fillSymbol||this._defaultFillSymbol;this._fillSymbol=g;this._areaLineSymbol=g.outline||this._defaultLineSymbol;this._borderlessFillSymbol=A.fromJson(g.toJson());this._borderlessFillSymbol.setOutline(null);this._lineSymbol=b.lineSymbol?b.lineSymbol:this._defaultLineSymbol;this._defaultDistanceUnit=b.defaultLengthUnit?b.defaultLengthUnit:O.MILES;this._defaultAreaUnit=b.defaultAreaUnit?
b.defaultAreaUnit:O.ACRES;this._defaultLocationUnit=b.defaultLocationUnit?b.defaultLocationUnit:O.DECIMAL_DEGREES;this._snappingCallback=k.hitch(this,this._snappingCallback);b.geometry&&(this._userGeometry=b.geometry);this._calcTimer=null;this.advancedLocationUnits=b.advancedLocationUnits||!1;this._NLS_Lon=G.widgets.measurement.NLS_longitude;this._NLS_Lat=G.widgets.measurement.NLS_latitude;this._gsErrorMsg=G.widgets.measurement.NLS_geometry_service_error;this._calculatingMsg=G.widgets.measurement.NLS_calculating;
this._geometryServiceLength=l(this._geometryServiceLength,250)}else console.log("Unable to find the required 'map' property in widget parameters")},startup:function(){this._setupDictionaries();d.create("img",{src:this._mouseImgURL,style:"vertical-align: middle"},this.mouseCell);this._useDefaultPointSymbol?d.create("img",{src:this._defaultPinURL,style:"vertical-align: middle"},this.pinCell):this._drawPointGraphics(this.pinCell);if(this._userGeometry)if(this._map.loaded)this._measureCustomGeometry(this._userGeometry),
this._userGeometry=null;else var a=e.connect(this._map,"onLoad",this,function(){e.disconnect(a);a=null;this._measureCustomGeometry(this._userGeometry);this._userGeometry=null})},destroy:function(){this._resetToolState();this.clearResult();this.inherited(arguments);this._map=this._geometryService=this._measureGraphics=this._measureGraphic=this._tempGraphic=null},setTool:function(a,b){this.previousTool=this.activeTool||null;this._polylineGraphics=[];this._resetToolState();this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),
this._polygonGraphic=null);var d=t.byNode(this._buttonDijits[a].domNode).checked;c.set(this._unitDropDown.domNode,"visibility","visible");t.byNode(this._buttonDijits.area.domNode).set("checked",!1);t.byNode(this._buttonDijits.distance.domNode).set("checked",!1);t.byNode(this._buttonDijits.location.domNode).set("checked",!1);if(!0===b||!1===b)d=b;t.byNode(this._buttonDijits[a].domNode).set("checked",d);this._toggleLocationResultsTable(!1,!0);d?(this.activeTool=a,(this._dblClickZoom=this._map.isDoubleClickZoom)&&
this._map.disableDoubleClickZoom(),"area"===a?this._setupAreaTool():"distance"===a?this._setupDistanceTool():"location"===a&&this._setupLocationTool(),this._map.snappingManager&&(this._map.snappingManager._startSelectionLayerQuery(),this._map.snappingManager._setUpSnapping())):(this.activeTool=null,c.set(this._unitDropDown.domNode,"visibility","hidden"));if(this.activeTool!==this.previousTool)this.onToolChange(this.activeTool,this.getUnit(),this.previousTool)},measure:function(a){a&&this._measureCustomGeometry(a)},
clearResult:function(){var a=this._map,b;this.result=0;this.resultValue.setContent("\x26nbsp");for(b=0;b<this._measureGraphics.length;b++)a.graphics.remove(this._measureGraphics[b]);this._measureGraphic=this._locationGraphic=this._currentGeometry=null;this._measureGraphics=[];a.graphics.remove(this._tempGraphic);e.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null},show:function(){K.show(this.domNode)},hide:function(){K.hide(this.domNode)},showTool:function(a){c.set(this._buttonDijits[a].domNode,
"display","inline-block")},hideTool:function(a){c.set(this._buttonDijits[a].domNode,"display","none")},getTool:function(){if(this.activeTool)return{toolName:this.activeTool,unitName:this.getUnit()}},getUnit:function(){if("unit"!==this._unitDropDown.label)return this._unitDropDown.label},_setupLocationTool:function(){this._map.navigationManager.setImmediateClick(!0);this._measureGraphics=[];this._map.graphics.remove(this._locationGraphic);this._createLocationUnitList();"PCS"===this._map.cs&&(this._projectMapExtent(this._map.extent),
this._mapExtentChangeHandler=e.connect(this._map,"onExtentChange",k.hitch(this,this._projectMapExtent)));this._clickMapHandler=e.connect(this._map,"onClick",this,"_locationClickHandler");if("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit)this._mouseMoveMapHandler=e.connect(this._map,"onMouseMove",this,"_locationMoveHandler")},_locationButtonToggle:function(){this.clearResult();this.setTool("location")},_measureCustomPoint:function(a){this.setTool("location",
!0);"Web Mercator"===this._map.cs&&a.spatialReference!==this._map.spatialReference&&(a=w.geographicToWebMercator(a));this._measureGraphic=new z;this._measureGraphic.setSymbol(this._pointSymbol);this._measureGraphic.setGeometry(a);this._measureGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);this._currentGeometry=a;this._calculateLocation(a,!0)},_calculateLocation:function(a,b){var c=!("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit);
c&&this._mouseMoveMapHandler&&(e.disconnect(this._mouseMoveMapHandler),this._mouseMoveMapHandler=null);var d=k.clone(a);if(b){if("Web Mercator"!==this.map.cs&&this.map.spatialReference&&4326!==this.map.spatialReference.wkid){this._projectLocation(d,c);return}this._updateMarkerLocation(d.x,d.y)}d=this._getGCSLocation(d);this._advancedLocationDisplayHandler(d,c,b)},_projectLocation:function(a,b){this._geometryService.project([a],new T({wkid:4326}),k.hitch(this,function(a){this._advancedLocationDisplayHandler(a[0],
b,!0)}),k.hitch(this,function(a){console.log(this._gsErrorMsg,a)}))},_advancedLocationDisplayHandler:function(a,b,c){b?this._updateGeocoordinateStringLocation({coordinates:[[a.x,a.y]],sr:{wkid:4326},conversionType:this._unitStrings[this.currentLocationUnit]},a):(b=this._calculateXY(a.x,a.y),c?(this._updateClickLocation(b[0],b[1]),this.onMeasureEnd(this.activeTool,a,[b[0],b[1]],this.getUnit())):this._updateMouseLocation(b[0],b[1]))},_updateMarkerLocation:function(a,b){this.markerLocationX=a;this.markerLocationY=
b},_updateMouseLocation:function(a,b){this.mouseLongitude.innerHTML=a;this.mouseLatitude.innerHTML=b},_updateClickLocation:function(a,b){this._updateMouseLocation(a,b);this.markerLongitude.innerHTML=a;this.markerLatitude.innerHTML=b},_updateGeocoordinateStringLocation:function(a,b){this.resultValue.setContent("\x26nbsp");this._geometryService.toGeoCoordinateString(a,k.hitch(this,function(a){clearTimeout(this._calcTimer);a?(this.resultValue.setContent(a[0]),this.onMeasureEnd(this.activeTool,b,a,this.getUnit())):
(this.resultValue.setContent(this._gsErrorMsg),this.onMeasureEnd(this.activeTool,null,null,this.getUnit()))}));clearTimeout(this._calcTimer);this._calcTimer=setTimeout(k.hitch(this,function(){this.resultValue.setContent(this._calculatingMsg)},1E3))},_switchLocationUnit:function(a){t.byNode(this._unitDropDown.domNode).set("label",this._unitStrings[a]);this.currentLocationUnit=a;e.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;this.onUnitChange(this._unitStrings[a],this.activeTool);
if("esriDegreeMinuteSeconds"===a||"esriDecimalDegrees"===a)this._mouseMoveMapHandler=e.connect(this._map,"onMouseMove",this,"_locationMoveHandler"),this._toggleLocationResultsTable(!0,!1),this._locationGraphic&&this._calculateLocation(this._locationGraphic.geometry,!0);else if(this._toggleLocationResultsTable(!1,!1),null!==this.resultValue&&(null!==this.markerLocationX||null!==this.markerLocationY)&&this._locationGraphic){var b=this._getGCSLocation(this._locationGraphic.geometry);this._updateGeocoordinateStringLocation({coordinates:[[b.x,
b.y]],sr:{wkid:4326},conversionType:this._unitStrings[a]},this._locationGraphic.geometry)}},_toggleLocationResultsTable:function(a,b){b&&(this.resultValue.setContent("\x26nbsp"),this.markerLongitude.innerHTML="---",this.markerLatitude.innerHTML="---",this.mouseLongitude.innerHTML="---",this.mouseLatitude.innerHTML="---");a?(K.show(this.resultTable.domNode),K.hide(this.resultValueContainer.domNode)):(K.hide(this.resultTable.domNode),K.show(this.resultValueContainer.domNode),e.disconnect(this._mouseMoveMapHandler));
"PCS"===this._map.cs&&K.hide(this._mouseRow)},_setupDistanceTool:function(){this._map.navigationManager.setImmediateClick(!0);"PCS"===this._map.cs&&(this._projectMapExtent(this._map.extent),this._mapExtentChangeHandler=e.connect(this._map,"onExtentChange",this,"_projectMapExtent"));this._inputPoints=[];this._createDistanceUnitList();this._mouseClickMapHandler=e.connect(this._map,"onClick",this,"_measureDistanceMouseClickHandler");this._doubleClickMapHandler=e.connect(this._map,"onDblClick",this,"_measureDistanceDblClickHandler")},
_distanceButtonToggle:function(){this.clearResult();this.setTool("distance")},_measureCustomDistance:function(a){if(1<a.paths[0].length){this.setTool("distance",!0);this._inputPoints=[];n.forEach(a.paths[0],k.hitch(this,function(b,c){this._inputPoints.push(b);var d=new z(new u(b[0],b[1],a.spatialReference),this._pointSymbol);this._measureGraphics.push(d);this._map.graphics.add(d);0!==c&&(this.result+=this._geodesicDistance(b,a.paths[0][c-1]))}));this._measureGraphic=new z;this._measureGraphic.setSymbol(this._lineSymbol);
this._measureGraphics.push(this._measureGraphic);var b=this._densifyGeometry(a);this._measureGraphic.setGeometry(b);this._map.graphics.add(this._measureGraphic);this._inputPoints=[];b=this._outputResult(this.result,this.getUnit());this._currentGeometry=a;this.onMeasureEnd(this.activeTool,a,b,this.getUnit())}},_showDistance:function(a){a&&this._outputResult(a,t.byNode(this._unitDropDown.domNode).label)},_setupAreaTool:function(){this._map.navigationManager.setImmediateClick(!0);this._inputPoints=[];
this._createAreaUnitList();this._tempGraphic=new z;this._tempGraphic.setSymbol(this._areaLineSymbol);this._tempGraphic.setGeometry(new q(this._map.spatialReference));this._map.graphics.add(this._tempGraphic);"PCS"===this._map.cs&&(this._geometryAreaHandler=e.connect(this._geometryService,"onAreasAndLengthsComplete",this,"_outputArea"));this._mouseClickMapHandler=e.connect(this._map,"onClick",this,"_measureAreaMouseClickHandler");this._doubleClickMapHandler=e.connect(this._map,"onDblClick",this,"_measureAreaDblClickHandler")},
_areaButtonToggle:function(){this.clearResult();this.setTool("area")},_generatePolygonFromPaths:function(){var a=[];n.forEach(this._polylineGraphics,k.hitch(this,function(b){n.forEach(b.geometry.paths,k.hitch(this,function(b){n.forEach(b,k.hitch(this,function(b){a.push(b)}))}))}));a.push(a[0]);var b=new D(this._map.spatialReference);b.addRing(a);var b=this._densifyGeometry(b),c=new z;c.setGeometry(b);c.setSymbol(this._borderlessFillSymbol);this._measureGraphic=c;this._measureGraphics.push(c);return c},
_getArea:function(a){var b=[],c=new F;c.areaUnit=J.UNIT_SQUARE_METERS;c.calculationType="geodesic";D.prototype.isSelfIntersecting(a)?this._geometryService.simplify([a],k.hitch(this,function(a){n.forEach(a,k.hitch(this,function(d){"PCS"===this._map.cs?(c.polygons=a,this._geometryService.areasAndLengths(c)):("Web Mercator"===this._map.cs&&(d=w.webMercatorToGeographic(d)),b.push(d))}));var d=y.geodesicAreas(b,O.SQUARE_METERS);this._showArea(d[0])})):("Web Mercator"===this._map.cs&&(a=w.webMercatorToGeographic(a)),
b.push(a),"PCS"===this._map.cs?(c.polygons=b,this._geometryService.areasAndLengths(c)):(a=y.geodesicAreas(b,O.SQUARE_METERS),this._showArea(Math.abs(a[0]))))},_outputArea:function(a){this._showArea(Math.abs(a.areas[0]))},_showArea:function(a){if(a)if(this.result=a,a=t.byNode(this._unitDropDown.domNode).label,a=this._outputResult(this.result,a),this._mouseMoveMapHandler)this.onMeasure(this.activeTool,this._currentGeometry,a,this.getUnit(),null);else this.onMeasureEnd(this.activeTool,this._currentGeometry,
a,this.getUnit())},_measureCustomArea:function(a){this.setTool("area",!0);this._inputPoints=[];var b=this._densifyGeometry(a);this._currentGeometry=a;this._measureGraphic=new z;this._measureGraphic.setGeometry(b);this._measureGraphic.setSymbol(this._fillSymbol);this._measureGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);this._getArea(a);this._inputPoints=[]},_resetToolState:function(){var a=this._map;a.navigationManager.setImmediateClick(!1);this._dblClickZoom&&a.enableDoubleClickZoom();
this._inputPoints=[];e.disconnect(this._mouseClickMapHandler);e.disconnect(this._mouseMoveMapHandler);e.disconnect(this._doubleClickMapHandler);e.disconnect(this._mouseDragMapHandler);e.disconnect(this._clickMapHandler);e.disconnect(this._mapExtentChangeHandler);e.disconnect(this._geometryAreaHandler);this._mouseClickMapHandler=this._mouseMoveMapHandler=this._doubleClickMapHandler=this._mouseDragMapHandler=this._clickMapHandler=this._mapExtentChangeHandler=this._geometryAreaHandler=null;a.snappingManager&&
a.snappingManager._snappingGraphic&&a.graphics.remove(a.snappingManager._snappingGraphic);this._map.snappingManager&&(this._map.snappingManager._stopSelectionLayerQuery(),this._map.snappingManager._killOffSnapping());this._unitDropDown._opened&&this._unitDropDown.closeDropDown()},_measureCustomGeometry:function(a){this.clearResult();switch(a.type){case "point":this._measureCustomPoint(a);break;case "polyline":this._measureCustomDistance(a);break;case "polygon":this._measureCustomArea(a)}},_densifyGeometry:function(a){var b=
this._map.cs,c=y.getSpheroidInfo(a.spatialReference).radius*this._densificationRatio;"Web Mercator"===b?(a=w.webMercatorToGeographic(a),c=y.geodesicDensify(a,c),c=w.geographicToWebMercator(c)):c="PCS"===b?a:y.geodesicDensify(a,c);return c},_geodesicDistance:function(a,b){var c=new q(this._map.spatialReference);"PCS"===this._map.cs&&(a=this._getGCSLocation(a),b=this._getGCSLocation(b));c.addPath([a,b]);"Web Mercator"===this._map.cs&&(c=w.webMercatorToGeographic(c));return y.geodesicLengths([c],O.METERS)[0]},
_calculateXY:function(a,b){var c=G.widgets.measurement,d=this._map.getScale(),e,f;if(this.getUnit()===c.NLS_decimal_degrees)f=500<=d?6:500>d&&50<=d?7:50>d&&5<=d?8:9,e=a.toFixed(f),this._map.spatialReference._isWrappable()||(e=this._roundX(e)),e=L.format(e),f=L.format(this._roundY(b.toFixed(f)));else if(this.getUnit()===c.NLS_deg_min_sec){var g=c=!1,h,k,M,l;f=9E4<=d?0:9E4>d&&9E3<=d?1:9E3>d&&900<=d?2:900>d&&90<d?3:4;0>a&&(c=!0,a=Math.abs(a));0>b&&(g=!0,b=Math.abs(b));b=this._roundY(b);this._map.spatialReference._isWrappable()||
(a=this._roundX(a));h=Math.floor(b)+"\u00b0";e=Math.floor(a)+"\u00b0";k=Math.floor(this._getDegreeMinutes(b))+"'";d=Math.floor(this._getDegreeMinutes(a))+"'";M=L.format(this._getDegreeSeconds(b).toFixed(f))+'"';l=L.format(this._getDegreeSeconds(a).toFixed(f))+'"';f=h+k+M;e=e+d+l;c&&(e="-"+e);g&&(f="-"+f)}return[e,f]},_getDegreeMinutes:function(a){return 60*(a-Math.floor(a))},_getDegreeSeconds:function(a){return 60*(60*(a-Math.floor(a))-Math.floor(60*(a-Math.floor(a))))},_roundY:function(a){90<a?a=
90:-90>a&&(a=-90);return a},_roundX:function(a){180<a?a=180:-180>a&&(a=-180);return a},_getGCSLocation:function(a){a=k.clone(a);var b=this._map,c=b.extent,d=b._newExtent;"Web Mercator"===b.cs?a=w.webMercatorToGeographic(a):"PCS"===b.cs?d&&(a=new u((a.x-c.xmin)*Math.abs((d.xmax-d.xmin)/(c.xmax-c.xmin))+d.xmin,(a.y-c.ymin)*Math.abs((d.ymax-d.ymin)/(c.ymax-c.ymin))+d.ymin,b.spatialReference)):a=a.normalize();return a},_projectMapExtent:function(a){a=new z(a);var b=new T({wkid:4326});this._geometryService.project([a.geometry],
b,k.hitch(this,function(a){if(!this._mouseMoveMapHandler&&"location"===this.activeTool){if("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit)this._mouseMoveMapHandler=e.connect(this._map,"onMouseMove",k.hitch(this,this._locationMoveHandler));this._mouseMoveMapHandler=e.connect(this._map,"onMouseMove",k.hitch(this,this._locationMoveHandler))}this._map._newExtent=a[0]}))},_checkCS:function(a){if(a.wkid)return 3857===a.wkid||102100===a.wkid||102113===
a.wkid?"Web Mercator":C.isDefined(V[a.wkid])?"PCS":"GCS";if(a.wkt)return-1!==a.wkt.indexOf("WGS_1984_Web_Mercator")?"Web Mercator":0===a.wkt.indexOf("PROJCS")?"PCS":"GCS"},_switchUnit:function(a){"distance"===this.activeTool?this.currentDistanceUnit=a:"area"===this.activeTool?this.currentAreaUnit=a:"location"===this.activeTool&&(this.currentLocationUnit=a);t.byNode(this._unitDropDown.domNode).set("label",this._unitStrings[a]);if(null!==this.result){var b=this._outputResult(this.result,this._unitStrings[a]);
this.onUnitChange(this._unitStrings[a],this.activeTool);if(null!==this._currentGeometry||null!==this._measureGraphic)if(a=this._currentGeometry||this._measureGraphic.geometry,this._mouseMoveMapHandler)this.onMeasure(this.activeTool,a,b,this.getUnit(),null);else this.onMeasureEnd(this.activeTool,a,b,this.getUnit())}},_setupDictionaries:function(){var a=G.widgets.measurement;this._unitDictionary[a.NLS_length_meters]=1;this._unitDictionary[a.NLS_length_kilometers]=1E3;this._unitDictionary[a.NLS_length_feet]=
.3048;this._unitDictionary[a.NLS_length_miles]=1609.344;this._unitDictionary[a.NLS_length_yards]=.9144;this._unitDictionary[a.NLS_length_nautical_miles]=1852;this._unitDictionary[a.NLS_length_miles_us]=1609.347218694438;this._unitDictionary[a.NLS_length_feet_us]=.3048006096012192;this._unitDictionary[a.NLS_length_yards_us]=.9144018288036576;this._unitDictionary[a.NLS_area_sq_meters]=1;this._unitDictionary[a.NLS_area_sq_kilometers]=1E6;this._unitDictionary[a.NLS_area_sq_feet]=.09290304;this._unitDictionary[a.NLS_area_acres]=
4046.8564224;this._unitDictionary[a.NLS_area_sq_miles]=2589988.110336;this._unitDictionary[a.NLS_area_hectares]=1E4;this._unitDictionary[a.NLS_area_sq_yards]=.83612736;this._unitDictionary[a.NLS_area_sq_nautical_miles]=3429904;this._unitDictionary[a.NLS_area_acres_us]=4046.872609874252;this._unitDictionary[a.NLS_area_sq_miles_us]=2589998.470319522;this._unitDictionary[a.NLS_area_sq_feet_us]=.09290341161327487;this._unitDictionary[a.NLS_area_sq_yards_us]=.8361307045194736;this._unitStrings={esriMiles:a.NLS_length_miles,
esriKilometers:a.NLS_length_kilometers,esriFeet:a.NLS_length_feet,esriFeetUS:a.NLS_length_feet_us,esriMeters:a.NLS_length_meters,esriYards:a.NLS_length_yards,esriNauticalMiles:a.NLS_length_nautical_miles,esriMilesUS:a.NLS_length_miles_us,esriYardsUS:a.NLS_length_yards_us,esriAcres:a.NLS_area_acres,esriSquareMiles:a.NLS_area_sq_miles,esriSquareKilometers:a.NLS_area_sq_kilometers,esriHectares:a.NLS_area_hectares,esriSquareYards:a.NLS_area_sq_yards,esriSquareFeet:a.NLS_area_sq_feet,esriSquareFeetUS:a.NLS_area_sq_feet_us,
esriSquareMeters:a.NLS_area_sq_meters,esriAcresUS:a.NLS_area_acres_us,esriSquareMilesUS:a.NLS_area_sq_miles_us,esriSquareYardsUS:a.NLS_area_sq_yards_us,esriSquareNauticalMiles:a.NLS_area_sq_nautical_miles,esriDecimalDegrees:a.NLS_decimal_degrees,esriDegreeMinuteSeconds:a.NLS_deg_min_sec,esriMGRS:a.NLS_MGRS,esriUSNG:a.NLS_USNG,esriUTM:a.NLS_UTM,esriGARS:a.NLS_GARS,esriGeoRef:a.NLS_GeoRef,esriDDM:a.NLS_DDM,esriDD:a.NLS_DD};this._locationUnitStrings=[a.NLS_decimal_degrees,a.NLS_deg_min_sec,a.NLS_MGRS,
a.NLS_USNG,a.NLS_UTM,a.NLS_GeoRef,a.NLS_GARS];this._locationUnitStringsLong="esriDecimalDegrees esriDegreeMinuteSeconds esriMGRS esriUSNG esriUTM esriGeoRef esriGARS".split(" ");this._distanceUnitStrings=[a.NLS_length_miles,a.NLS_length_kilometers,a.NLS_length_feet,a.NLS_length_feet_us,a.NLS_length_meters,a.NLS_length_yards,a.NLS_length_nautical_miles];this._distanceUnitStringsLong="esriMiles esriKilometers esriFeet esriFeetUS esriMeters esriYards esriNauticalMiles".split(" ");this._areaUnitStrings=
[a.NLS_area_acres,a.NLS_area_sq_miles,a.NLS_area_sq_kilometers,a.NLS_area_hectares,a.NLS_area_sq_yards,a.NLS_area_sq_feet,a.NLS_area_sq_feet_us,a.NLS_area_sq_meters];this._areaUnitStringsLong="esriAcres esriSquareMiles esriSquareKilometers esriHectares esriSquareYards esriSquareFeet esriSquareFeetUS esriSquareMeters".split(" ");this._buttonDijits={area:this._areaButton,distance:this._distanceButton,location:this._locationButton};t.byNode(this._distanceButton.domNode).setLabel(a.NLS_distance);t.byNode(this._areaButton.domNode).setLabel(a.NLS_area);
t.byNode(this._locationButton.domNode).setLabel(a.NLS_location);t.byNode(this.resultLabel.domNode).setContent(a.NLS_resultLabel)},onToolChange:function(){},onUnitChange:function(){},onMeasureStart:function(){},onMeasure:function(){},onMeasureEnd:function(){},_measureAreaMouseClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);b=b||a.mapPoint;this._inputPoints.push(b);this._currentStartPt=b;if(1===this._inputPoints.length){this._tempGraphic.setGeometry(new q(this._map.spatialReference));
for(a=0;a<this._measureGraphics.length;a++)this._map.graphics.remove(this._measureGraphics[a]);this._measureGraphics=[];this.result=0;this._outputResult(this.result,G.widgets.measurement.NLS_area_sq_meters);this._mouseMoveMapHandler=e.connect(this._map,"onMouseMove",this,"_measureAreaMouseMoveHandler");this.onMeasureStart(this.activeTool,this.getUnit())}this._measureGraphic=new z;this._measureGraphic.setSymbol(this._areaLineSymbol);this._measureGraphics.push(this._measureGraphic);if(1<this._inputPoints.length){a=
new q(this._map.spatialReference);a.addPath([this._inputPoints[this._inputPoints.length-2],b]);var c=new q(this._map.spatialReference);c.addPath([this._inputPoints[0],b]);b=this._densifyGeometry(a);c=this._densifyGeometry(c);this._tempGraphic.setGeometry(c);this._measureGraphic.setGeometry(b);this._map.graphics.add(this._measureGraphic);b=new z;b.setGeometry(a);this._polylineGraphics.push(b);if(2<this._inputPoints.length){b=new D(this._map.spatialReference);c=[];for(a=0;a<this._inputPoints.length;a++)c.push([this._inputPoints[a].x,
this._inputPoints[a].y]);c.push([this._inputPoints[0].x,this._inputPoints[0].y]);b.addRing(c);this._currentGeometry=b;this._polygonGraphic?(this._map.graphics.remove(this._polygonGraphic),this._polylineGraphics.push(this._tempGraphic),this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic),this._measureGraphic=this._polygonGraphic,this._polylineGraphics.pop()):(this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic));
this._getArea(b)}}else this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polygonGraphic=null)},_measureAreaMouseMoveHandler:function(a){var b;if(0<this._inputPoints.length){var c=new q(this._map.spatialReference),d;this._map.snappingManager&&(d=this._map.snappingManager._snappingPoint);b=d||a.mapPoint;c.addPath([this._currentStartPt,b]);a=this._densifyGeometry(c);this._tempGraphic.setGeometry(a)}1<this._inputPoints.length&&(a=new q(this._map.spatialReference),a.addPath([b,
this._inputPoints[0]]),b=this._densifyGeometry(a),this._tempGraphic.setGeometry(this._tempGraphic.geometry.addPath(b.paths[0])))},_measureAreaDblClickHandler:function(a){e.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;"touch"===this._map.navigationManager.eventModel&&g("ios")&&this._measureAreaMouseClickHandler(a);a=new D(this._map.spatialReference);var b=[],c;for(c=0;c<this._inputPoints.length;c++)b.push([this._inputPoints[c].x,this._inputPoints[c].y]);b.push([this._inputPoints[0].x,
this._inputPoints[0].y]);a.addRing(b);this._inputPoints=[];this._currentGeometry=a;this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polylineGraphics.push(this._tempGraphic),this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic));this._getArea(a);this._polylineGraphics=[]},_measureDistanceMouseClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;this._inputPoints.push(a);
this._currentStartPt=a;if(1===this._inputPoints.length){for(b=0;b<this._measureGraphics.length;b++)this._map.graphics.remove(this._measureGraphics[b]);this._map.graphics.remove(this._tempGraphic);this._measureGraphics=[];this.result=0;this._outputResult(this.result,G.widgets.measurement.NLS_length_meters);this._tempGraphic=new z;this._tempGraphic.setSymbol(this._lineSymbol);this._map.graphics.add(this._tempGraphic);this._mouseMoveMapHandler=e.connect(this._map,"onMouseMove",this,"_measureDistanceMouseMoveHandler");
this.onMeasureStart(this.activeTool,this.getUnit())}this._tempGraphic.setGeometry(new q(this._map.spatialReference));b=new z;b.setSymbol(this._pointSymbol);b.setGeometry(a);this._measureGraphics.push(b);this._map.graphics.add(b);if(1<this._inputPoints.length){this._measureGraphic=new z;this._measureGraphic.setSymbol(this._lineSymbol);this._measureGraphics.push(this._measureGraphic);b=new q(this._map.spatialReference);b.addPath([this._inputPoints[this._inputPoints.length-2],a]);var c=this._densifyGeometry(b);
this._measureGraphic.setGeometry(c);this._map.graphics.add(this._measureGraphic);"PCS"===this._map.cs?this._geometryServiceLength(b,!1):(c=this._geodesicDistance(this._inputPoints[this._inputPoints.length-2],a),b=this._outputResult(c,this.getUnit()),this.result+=c,this._showDistance(this.result),c=this._outputResult(this.result,this.getUnit()),this.onMeasure(this.activeTool,a,c,this.getUnit(),b))}else b.setSymbol(this._pointSymbol)},_measureDistanceMouseMoveHandler:function(a){if(0<this._inputPoints.length){var b,
c=new q(this._map.spatialReference);this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;c.addPath([this._currentStartPt,a]);c=this._densifyGeometry(c);this._tempGraphic.setGeometry(c);"PCS"!==this._map.cs&&(b=this._geodesicDistance(this._currentStartPt,a),c=this._outputResult(b,this.getUnit()),b+=this.result,this._showDistance(b),b=this._outputResult(b,this.getUnit()),this.onMeasure(this.activeTool,a,b,this.getUnit(),c))}},_measureDistanceDblClickHandler:function(a){var b;
e.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;"touch"===this._map.navigationManager.eventModel&&g("ios")&&this._measureDistanceMouseClickHandler(a);a=new q(this._map.spatialReference);a.addPath(this._inputPoints);this._currentGeometry=a;b=this._densifyGeometry(a);this._measureGraphic.geometry=b;"PCS"===this._map.cs?this._geometryServiceLength(a,!0):(this._inputPoints=[],this.onMeasureEnd(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit()))},_geometryServiceLength:function(a,
b){var c=new I;c.polylines=[a];c.lengthUnit=9001;c.calculationType="geodesic";this._geometryService.lengths(c,k.hitch(this,function(c){c=c.lengths[0];if(b)this.result=c,this._showDistance(this.result),this._inputPoints=[],this.onMeasureEnd(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit());else{var d=this._outputResult(c,this.getUnit());this.result+=c;this._showDistance(this.result);this.onMeasure(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit(),
d)}}))},_locationClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;this._locationButtonToggle();this._locationGraphic=new z;this._locationGraphic.setGeometry(a);this._locationGraphic.setSymbol(this._pointSymbol);this._map.graphics.add(this._locationGraphic);this._measureGraphics.push(this._locationGraphic);this._calculateLocation(a,!0)},_locationMoveHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);
this._calculateLocation(b||a.mapPoint,!1)},_outputResult:function(a,b){var c=a/this._unitDictionary[b];0===c?this.resultValue.setContent("\x26nbsp"):1E6<c?this.resultValue.setContent(L.format(c.toPrecision(9),{pattern:this.numberPattern})+" "+b):10>c?this.resultValue.setContent(L.format(c.toFixed(2),{pattern:this.numberPattern+"0"})+" "+b):this.resultValue.setContent(L.format(c.toFixed(2),{pattern:this.numberPattern})+" "+b);return c},_createDistanceUnitList:function(){var a,b=new x({style:"display: none;"});
n.forEach(this._distanceUnitStrings,k.hitch(this,function(a,c){var d=new v({label:a,onClick:k.hitch(this,function(){this._switchUnit(this._distanceUnitStringsLong[c])})});d.set("class","unitDropDown");b.addChild(d)}));t.byNode(this._unitDropDown.domNode).set("dropDown",b);this.currentDistanceUnit?(a=this._unitStrings[this.currentDistanceUnit],t.byNode(this._unitDropDown.domNode).set("label",a)):(a=this._unitStrings[this._defaultDistanceUnit],t.byNode(this._unitDropDown.domNode).set("label",a),this.currentDistanceUnit=
this._defaultDistanceUnit)},_createAreaUnitList:function(){var a,b=new x({style:"display: none;"});n.forEach(this._areaUnitStrings,k.hitch(this,function(a,c){var d=new v({label:a,onClick:k.hitch(this,function(){this._switchUnit(this._areaUnitStringsLong[c])})});d.set("class","unitDropDown");b.addChild(d)}));t.byNode(this._unitDropDown.domNode).set("dropDown",b);this.currentAreaUnit?(a=this._unitStrings[this.currentAreaUnit],t.byNode(this._unitDropDown.domNode).set("label",a)):(a=this._unitStrings[this._defaultAreaUnit],
t.byNode(this._unitDropDown.domNode).set("label",a),this.currentAreaUnit=this._defaultAreaUnit)},_createLocationUnitList:function(){var a;a=this._locationUnitStrings;var b=new x({style:"display: none;"});if(null===this._geometryService||!1===this.advancedLocationUnits)a=a.slice(0,2);n.forEach(a,k.hitch(this,function(a,c){var d=new v({label:a,onClick:k.hitch(this,function(){this._switchLocationUnit(this._locationUnitStringsLong[c])})});d.set("class","unitDropDown");b.addChild(d)}));t.byNode(this._unitDropDown.domNode).set("dropDown",
b);this.currentLocationUnit||(this.currentLocationUnit=this._defaultLocationUnit);a=this._unitStrings[this.currentLocationUnit];t.byNode(this._unitDropDown.domNode).set("label",a);"esriDegreeMinuteSeconds"!==this.currentLocationUnit&&"esriDecimalDegrees"!==this.currentLocationUnit||this._toggleLocationResultsTable(!0,!1)},_drawPointGraphics:function(a){var e=this._pointSymbol,f=this._defaultCustomPointSymbolWidth,h=this._defaultCustomPointSymbolHeight,l,m;a=d.create("div",{"class":"esriLocationResultSymbol"},
a);a=b.createSurface(a,f,h);9>g("ie")&&(l=a.getEventSource(),c.set(l,"position","relative"),c.set(l.parentNode,"position","relative"));e=e.getShapeDescriptors();try{m=a.createShape(e.defaultShape).setFill(e.fill).setStroke(e.stroke)}catch(W){a.clear();a.destroy();return}var n=m.getBoundingBox(),e=n.width;l=n.height;var p=-(n.x+e/2),n=-(n.y+l/2);a=a.getDimensions();a={dx:p+a.width/2,dy:n+a.height/2};if(e>f||l>h)p=e/f>l/h,f=((p?f:h)-5)/(p?e:l),k.mixin(a,{xx:f,yy:f});m.applyTransform(a)}});g("extend-esri")&&
k.setObject("dijit.Measurement",m,P);return m});